<?php define('�', '���');
������������ˆ��ۍ���ՙ�����𢓈����韗�썙�����¥����ɥ�;
$GLOBALS[�] = explode(
    '|-|+|5', 'KOD_GROUP_PATH|-|+|5{group_path}|-|+|5KOD_GROUP_SHARE|-|+|5{group_share}|-|+|5KOD_USER_SHARE|-|+|5{user_share}|-|+|5KOD_USER_RECYCLE|-|+|5{user_recycle}|-|+|5KOD_USER_FAV|-|+|5{user_fav}|-|+|5KOD_GROUP_ROOT_SELF|-|+|5{tree_group_self}|-|+|5KOD_GROUP_ROOT_ALL|-|+|5{tree_group_all}|-|+|5is_root|-|+|5\\|-|+|5/|-|+|5../|-|+|5/\\.+\\/+/|-|+|5/\\/+/|-|+|5path_type|-|+|5|-|+|5path_pre|-|+|5path_id|-|+|5path_id_user_share|-|+|5:|-|+|5share/|-|+|5kod_user|-|+|5user_id|-|+|5config|-|+|5path_role_group_default|-|+|51|-|+|5actions|-|+|5path|-|+|5role|-|+|5type|-|+|5file|-|+|5filelist|-|+|5folderlist|-|+|5share|-|+|5//|-|+|5L|-|+|5group_not_exist|-|+|5path_from_auth_check|-|+|5no_permission_group|-|+|5path_role_group|-|+|5no_permission_action|-|+|5path_role_define|-|+|5<|-|+|5>|-|+|5auth|-|+|5ext_not_allow|-|+|5||-|+|5.|-|+|5.DS_Store|-|+|5iconv|-|+|5system_charset|-|+|5utf-8|-|+|5zh-CN|-|+|5zh-TW|-|+|5gbk|-|+|5.txt|-|+|5unzip_file_charset_get|-|+|5filename|-|+|5gbk|-|+|5mb_convert_encoding|-|+|5mb_detect_encoding|-|+|5check_charset|-|+|5unicode|-|+|5cp936|-|+|5euc-cn|-|+|5ascii|-|+|5iso-8859-1|-|+|5settings|-|+|5updload_chunk_size|-|+|5in|-|+|5user|-|+|5size|-|+|5lib/core/|-|+|5Application.class.php|-|+|5default_socket_timeout|-|+|5http|-|+|5method|-|+|5GET|-|+|5timeout|-|+|5<li>|-|+|5php_env_error_iconv|-|+|5</li>|-|+|5mb_convert_encoding|-|+|5php_env_error_mb_string|-|+|55.0|-|+|5>=|-|+|5php_env_error_version|-|+|5file_get_contents|-|+|5php_env_error_file|-|+|5php_env_error_list_dir|-|+|5system|-|+|5User|-|+|5Group|-|+|5session|-|+|5/	|-|+|5php_env_error_path|-|+|5imagecreatefromjpeg|-|+|5imagecreatefromgif|-|+|5imagecreatefrompng|-|+|5imagecolorallocate|-|+|5php_env_error_gd|-|+|5.cache_data|-|+|5data 目录不存在!

(检查 DATA_PATH);|-|+|5config/version.php|-|+|5\'KOD_VERSION\',\'(.*)\'|-|+|5您服务器开启了php缓存,文件更新尚未生效;
			请关闭缓存，或稍后1分钟刷新页面再试！
			<a href=\'http://www.tuicool.com/articles/QVjeu2i\' target=\'_blank\'>了解详情</a>|-|+|5[Error Code:1002] 目录权限错误！请设置程序目录及所有子目录为读写状态，
				linux 运行如下指令：
				<pre>chmod -R 777 |-|+|5</pre>|-|+|5index.html|-|+|5system/apps.php|-|+|5update.php|-|+|5access_token|-|+|5SaeStorage|-|+|5SAE_APPNAME|-|+|5HTTP_APPNAME|-|+|5setting_system|-|+|5system_password|-|+|5kodExplorer_|-|+|5access_token error!|-|+|5need_check_code|-|+|5en|-|+|5setting_all|-|+|5language|-|+|5zh|-|+|5zh-tw|-|+|5HTTP_ACCEPT_LANGUAGE|-|+|5en|-|+|5_|-|+|5-|-|+|5~([-a-z]+)(;q=([0-9.]+))?~|-|+|5~-.*~|-|+|5kod_user_language|-|+|5..|-|+|5zh_CN|-|+|5zh_TW|-|+|5/main.php|-|+|5LANGUAGE_TYPE|-|+|5*|-|+|5?|-|+|5"|-|+|5system_setting.php|-|+|5setting_system_default|-|+|5app|-|+|5first_in|-|+|5index|-|+|5system_role_group.php|-|+|5kod_name|-|+|5system_name|-|+|5kod_name_desc|-|+|5system_desc|-|+|5powerby|-|+|5kod_power_by|-|+|5config/setting_user.php|-|+|5STATIC_PATH|-|+|5static_path|-|+|5KOD_SESSION_SSO|-|+|5kod_token|-|+|5location:./index.php?user/login|-|+|5+|-|+|5=|-|+|5_a|-|+|5_b|-|+|5_c'
);
릥��Ƴ�������;
define($GLOBALS{�}[0], $GLOBALS{�}{0x001});
define($GLOBALS{�}[0x0002], $GLOBALS{�}{0x00003});
define($GLOBALS{�}[0x000004], $GLOBALS{�}{0x05});
define($GLOBALS{�}[0x006], $GLOBALS{�}{0x0007});
define($GLOBALS{�}[0x00008], $GLOBALS{�}{0x000009});
define($GLOBALS{�}[0x0a], $GLOBALS{�}{0x00b});
define($GLOBALS{�}[0x000c], $GLOBALS{�}{0x0000d});
function _DIR_CLEAR($�)
{
    $�� =& $GLOBALS{�};
    if (isset($GLOBALS[$��[0x00000e]]) && $GLOBALS[$��[0x00000e]]) {
        return $�;
    }
    $� = str_replace($��{0x0f}, $��[0x0010], trim($�));
    if (strstr($�, $��{0x00011})) {
        $� = preg_replace($��[0x000012], $��[0x0010], $�);
    }
    $� = preg_replace($��{0x0000013}, $��[0x0010], $�);

    return $�;
}

function _DIR($��)
{
    $���� =& $GLOBALS{�};
    $� = _DIR_CLEAR($��);
    ��ݦ������������Ÿ�����������݋�����������ܫ������Г��;
    $� = iconv_system($�);
    ���؛��֯����ޑ�������Ƿ��١;
    $�� = [
        KOD_GROUP_PATH,
        KOD_GROUP_SHARE,
        KOD_GROUP_ROOT_SELF,
        KOD_GROUP_ROOT_ALL,
        KOD_USER_SHARE,
        KOD_USER_RECYCLE,
        KOD_USER_FAV,
    ];
    $GLOBALS[$����[0x014]] = $����{0x0015};
    $GLOBALS[$����[0x00016]] = HOME;
    �Ҿꩠ�;
    $GLOBALS[$����{0x000017}] = $����{0x0015};
    unset($GLOBALS[$����[0x0000018]]);
    foreach ($�� as $����) {
        if (substr($�, 0, strlen($����)) == $����) {
            $GLOBALS[$����[0x014]] = $����;
            $֛� = explode($����[0x0010], $�);
            $� = $֛�[0];
            unset($֛�[0]);
            $耗�� = implode($����[0x0010], $֛�);
            $�� = explode($����{0x019}, $�);
            if (count($��) > 0x001) {
                $GLOBALS[$����{0x000017}] = trim($��[0x001]);
            } else {
                $GLOBALS[$����{0x000017}] = $����{0x0015};
            }
            break;
        }
    }
    switch ($GLOBALS[$����[0x014]]) {
        case $����{0x0015}:
            $� = iconv_system(HOME).$�;
            break;
            ��ژ�����蹻���������ω���؎ꧾ������Ũɯ�;
        case KOD_USER_RECYCLE:
            $GLOBALS[$����[0x00016]] = trim(USER_RECYCLE, $����[0x0010]);
            $GLOBALS[$����{0x000017}] = $����{0x0015};
            �ѻ��Ɣ���������Ӭʠ����;

            return iconv_system(USER_RECYCLE).$����[0x0010].str_replace(KOD_USER_RECYCLE, $����{0x0015}, $�);
            ����;
        case KOD_USER_FAV:
            $GLOBALS[$����[0x00016]] = trim(KOD_USER_FAV, $����[0x0010]);
            ������ӫ�ƾ���컖�����;
            $GLOBALS[$����{0x000017}] = $����{0x0015};

            return KOD_USER_FAV;
        case KOD_GROUP_ROOT_SELF:
            $GLOBALS[$����[0x00016]] = trim(KOD_GROUP_ROOT_SELF, $����[0x0010]);
            $GLOBALS[$����{0x000017}] = $����{0x0015};

            return KOD_GROUP_ROOT_SELF;
        case KOD_GROUP_ROOT_ALL:
            $GLOBALS[$����[0x00016]] = trim(KOD_GROUP_ROOT_ALL, $����[0x0010]);
            $GLOBALS[$����{0x000017}] = $����{0x0015};
            ��ʔ�����Ϧ��������;

            return KOD_GROUP_ROOT_ALL;
        case KOD_GROUP_PATH:
            $� = system_group::get_info($GLOBALS[$����{0x000017}]);
            if (!$GLOBALS[$����{0x000017}] || !$�) {
                return !1;
            }
            owner_group_check($GLOBALS[$����{0x000017}]);
            $GLOBALS[$����[0x00016]] = group_home_path($�);
            $� = iconv_system($GLOBALS[$����[0x00016]]).$耗��;
            ������ܿ����̋�������߻��ײ����Ϡ��˙;
            break;
        case KOD_GROUP_SHARE:
            $� = system_group::get_info($GLOBALS[$����{0x000017}]);
            if (!$GLOBALS[$����{0x000017}] || !$�) {
                return !1;
            }
            owner_group_check($GLOBALS[$����{0x000017}]);
            �ڌҒ�э����냏ĵ��������Æ����;
            $GLOBALS[$����[0x00016]] = group_home_path($�).$����[0x001a];
            $� = iconv_system($GLOBALS[$����[0x00016]]).$耗��;
            �޼˖�ҭ�ս���������ԟσ�������ʭ������̒;
            break;
        case KOD_USER_SHARE:
            $� = system_member::get_info($GLOBALS[$����{0x000017}]);
            if (!$GLOBALS[$����{0x000017}] || !$�) {
                return !1;
            }
            if ($GLOBALS[$����{0x000017}] != $_SESSION[$����{0x0001b}][$����[0x00001c]]) {
                $���� = $GLOBALS[$����{0x000001d}][$����[0x01e]][$����{0x001f}][$����[0x00020]];
                path_role_check($����);
            }
            $GLOBALS[$����[0x00016]] = $����{0x0015};
            $GLOBALS[$����[0x0000018]] = $��;
            if ($耗�� == $����{0x0015}) {
                return $�;
            } else {
                $���˜ = explode($����[0x0010], $耗��);
                $���˜[0] = iconv_app($���˜[0]);
                $��ѣ = system_member::user_share_get($GLOBALS[$����{0x000017}], $���˜[0]);
                $GLOBALS[$����[0x0000018]] = KOD_USER_SHARE.$����{0x019}.$GLOBALS[$����{0x000017}].$����[0x0010].$���˜[0].$����[0x0010];
                unset($���˜[0]);
                if (!$��ѣ) {
                    return !1;
                }
                $���� = rtrim($��ѣ[$����{0x000021}], $����[0x0010]).$����[0x0010].iconv_app(
                        implode($����[0x0010], $���˜)
                    );
                if ($�[$����[0x0000022]] != $����{0x001f}) {
                    $��� = user_home_path($�);
                    $GLOBALS[$����[0x00016]] = $���.rtrim($��ѣ[$����{0x000021}], $����[0x0010]).$����[0x0010];
                    $� = $���.$����;
                } else {
                    $GLOBALS[$����[0x00016]] = $��ѣ[$����{0x000021}];
                    $� = $����;
                }
                if ($��ѣ[$����{0x023}] == $����[0x0024]) {
                    $GLOBALS[$����[0x0000018]] = rtrim($GLOBALS[$����[0x0000018]], $����[0x0010]);
                    $GLOBALS[$����[0x00016]] = rtrim($GLOBALS[$����[0x00016]], $����[0x0010]);
                }
                $� = iconv_system($�);
            }
            break;
        default:
            break;
    }
    if ($� != $����[0x0010]) {
        $� = rtrim($�, $����[0x0010]);
        if (is_dir($�)) {
            $� = $�.$����[0x0010];
        }
    }

    return $�;
    ����;
}

function _DIR_OUT($�)
{
    $� =& $GLOBALS{�};
    if (is_array($�)) {
        foreach ($�[$�{0x00025}] as $��� => &$����) {
            $����[$�{0x000021}] = pre_clear($����[$�{0x000021}]);
        }
        foreach ($�[$�[0x000026]] as $��� => &$����) {
            $����[$�{0x000021}] = pre_clear(rtrim($����[$�{0x000021}], $�[0x0010]).$�[0x0010]);
        }
    } else {
        $� = pre_clear($�);
    }

    return $�;
}

function pre_clear($���)
{
    $���� =& $GLOBALS{�};
    $�ǥ = $GLOBALS[$����[0x014]];
    ����򹘰��������Ǉ�������߰ө����;
    $¢�Ƴ = rtrim($GLOBALS[$����[0x00016]], $����[0x0010]);
    �𩓹���렩��;
    $�✔� = [KOD_USER_FAV, KOD_GROUP_ROOT_SELF, KOD_GROUP_ROOT_ALL];
    ����;
    if (isset($GLOBALS[$����[0x014]]) && in_array($GLOBALS[$����[0x014]], $�✔�)) {
        return $���;
    }
    if (ST == $����{0x0000027}) {
        return str_replace($¢�Ƴ, $����{0x0015}, $���);
    }
    if ($GLOBALS[$����{0x000017}] != $����{0x0015}) {
        $�ǥ .= $����{0x019}.$GLOBALS[$����{0x000017}].$����[0x0010];
    }
    if (isset($GLOBALS[$����[0x0000018]])) {
        $�ǥ = $GLOBALS[$����[0x0000018]];
    }
    $��� = $�ǥ.str_replace($¢�Ƴ, $����{0x0015}, $���);
    $��� = str_replace($����[0x028], $����[0x0010], $���);
    �������;

    return $���;
}

function owner_group_check($�)
{
    $��� =& $GLOBALS{�};
    if (!$�) {
        show_json($GLOBALS[$���{0x0029}][$���[0x0002a]].$�, !1);
    }
    if ($GLOBALS[$���[0x00000e]] || (isset($GLOBALS[$���{0x00002b}]) && $GLOBALS[$���{0x00002b}] === !0)) {
        return;
    }
    $ǎ� = system_member::user_auth_group($�);
    if ($ǎ� == !1) {
        if ($GLOBALS[$���[0x014]] == KOD_GROUP_PATH) {
            show_json($GLOBALS[$���{0x0029}][$���[0x000002c]], !1);
        } else {
            if ($GLOBALS[$���[0x014]] == KOD_GROUP_SHARE) {
                $���� = $GLOBALS[$���{0x000001d}][$���[0x01e]][$���{0x001f}];
            }
        }
    } else {
        $���� = $GLOBALS[$���{0x000001d}][$���{0x02d}][$ǎ�];
        ��٧��;
    }
    path_role_check($����[$���[0x00020]]);
}

function path_role_check($��)
{
    $�ټ�� =& $GLOBALS{�};
    if ($GLOBALS[$�ټ��[0x00000e]] || (isset($GLOBALS[$�ټ��{0x00002b}]) && $GLOBALS[$�ټ��{0x00002b}] === !0)) {
        return;
    }
    $�� = role_permission_arr($��);
    if (!isset($��[ST.$�ټ��{0x019}.ACT])) {
        show_json($GLOBALS[$�ټ��{0x0029}][$�ټ��[0x002e]], !1);
    }
}

function role_permission_arr($��)
{
    $�� =& $GLOBALS{�};
    $� = [];
    $����� = $GLOBALS[$��{0x000001d}][$��{0x0002f}];
    ���;
    foreach ($�� as $��ݞ => $��) {
        if (!$��) {
            continue;
        }
        $��̛� = explode($��{0x019}, $��ݞ);
        ����ש�;
        if (count($��̛�) == 0x0002 && is_array($�����[$��̛�[0]]) && is_array($�����[$��̛�[0]][$��̛�[0x001]])) {
            $� = array_merge($�, $�����[$��̛�[0]][$��̛�[0x001]]);
        }
    }
    $���� = [];
    ��������������;
    foreach ($� as $��) {
        $����[$��] = $��{0x001f};
    }

    return $����;
    �����߳�䛩��������;
}

function checkExt($�����)
{
    $���� =& $GLOBALS{�};
    if (strstr($�����, $����[0x000030]) || strstr($�����, $����{0x0000031}) || $����� == $����{0x0015}) {
        return 0;
    }
    $� = $GLOBALS[$����[0x032]][$����{0x0033}];
    $��� = explode($����[0x00034], $�);
    foreach ($��� as $����) {
        if ($���� !== $����{0x0015} && stristr($�����, $����{0x000035}.$����)) {
            return 0;
        }
    }

    return 0x001;
    �������僮�����М�����;
}

function zip_pre_name($ط��, $��ʝ� = false)
{
    $���� =& $GLOBALS{�};
    if (get_path_this($ط��) == $����[0x0000036]) {
        return $����{0x0015};
    }
    if (!function_exists($����{0x037})) {
        return $ط��;
    }
    $�� = $GLOBALS[$����{0x000001d}][$����[0x0038]];
    if ($��ʝ� == !1) {
        $��ʝ� = $����{0x00039};
        $���� = get_default_lang();
        if (client_is_windows(
            ) && ($���� == $����[0x00003a] || $���� == $����{0x000003b} || LANGUAGE_TYPE == $����{0x000003b} || LANGUAGE_TYPE == $����{0x000003b})
        ) {
            $��ʝ� = $����[0x03c];
        }
    }
    $� = @iconv($��, $��ʝ�, $ط��);
    if (!$�) {
        $� = $ط��;
    }

    return $�;
}

function unzip_filter_ext($튒�)
{
    $� = $GLOBALS{�}{0x003d};
    ��눴���������ť�����蜴�ݵ�������;
    if (checkExt($튒�)) {
        return $튒�;
    }

    return $튒�.$�;
}

function unzip_pre_name($��)
{
    $�ɳ =& $GLOBALS{�};
    if (!function_exists($�ɳ{0x037})) {
        return unzip_filter_ext($��);
    }
    if (isset($GLOBALS[$�ɳ[0x0003e]])) {
        $� = $GLOBALS[$�ɳ[0x0003e]];
    } else {
        $� = get_charset($��);
    }
    $ά��� = $GLOBALS[$�ɳ{0x000001d}][$�ɳ[0x0038]];
    $��� = @iconv($�, $ά���, $��);
    if (!$���) {
        $��� = $��;
    }
    $��� = unzip_filter_ext($���);

    return $���;
}

function unzip_charset_get($�)
{
    $�ҭ =& $GLOBALS{�};
    if (count($�) == 0) {
        return $�ҭ{0x00039};
    }
    $�� = [];
    ����;
    for ($���� = 0; $���� < count($�); $����++) {
        $�̤ = get_charset($�[$����][$�ҭ{0x00003f}]);
        ��̫��޾������Ͻ�ť����ج�������ܔ������ѡ�;
        if (!isset($��[$�̤])) {
            $��[$�̤] = 0x001;
        } else {
            $��[$�̤] += 0x001;
        }
    }
    arsort($��);
    $ŵ��� = array_keys($��);
    if (in_array($�ҭ[0x0000040], $ŵ���)) {
        $ŵ���[0] = $�ҭ[0x0000040];
    }
    $GLOBALS[$�ҭ[0x0003e]] = $ŵ���[0];

    return $ŵ���[0];
}

function charset_check(&$��ӟ, $����)
{
    $���� =& $GLOBALS{�};
    if ($��ӟ === $����{0x0015} || !function_exists($����{0x041})) {
        return !1;
    }
    $� = $����{0x00039};
    $� = @mb_convert_encoding($��ӟ, $�, $����);
    ���ᒢ���������얯ʈ����ۂ��ݍ����婗���Ƌ����̽�����آփ����҄���;
    $���� = @mb_convert_encoding($�, $����, $�);
    if ($��ӟ == $����) {
        return !0;
    }

    return !1;
}

function get_charset(&$���)
{
    $� =& $GLOBALS{�};
    if ($��� === $�{0x0015} || !function_exists($�[0x0042])) {
        return $�{0x00039};
    }
    $��� = strtolower(@mb_detect_encoding($���, $GLOBALS[$�{0x000001d}][$�{0x00043}]));
    if (substr($���, 0, 0x0002) == chr(0xFF).chr(0xFE) || substr($���, 0, 0x0002) == chr(0xFE).chr(0xFF)) {
        $��� = $�[0x000044];
    } else {
        if (substr($���, 0, 0x00003) == chr(0xEF).chr(0xBB).chr(0xBF)) {
            $��� = $�{0x00039};
        } else {
            if ($��� == $�{0x0000045} || $��� == $�[0x046]) {
                $��� = $�[0x0000040];
            } else {
                if ($��� == $�{0x0047}) {
                    $��� = $�{0x00039};
                }
            }
        }
    }
    if ($��� == $�[0x00048]) {
        if (charset_check($���, $�{0x00039})) {
            $��� = $�{0x00039};
        }
    }

    return $���;
    ����փ�;
}

function file_upload_size()
{
    $�� =& $GLOBALS{�};
    global $config;
    if (isset($config[$��{0x000049}][$��[0x000004a]])) {
        return $config[$��{0x000049}][$��[0x000004a]];
    }
    $�� = get_post_max();

    return $��;
    ������ѻ;
}

function space_size_use_check()
{
    $ئ =& $GLOBALS{�};
    if (!system_space()) {
        return;
    }
    if ($GLOBALS[$ئ[0x00000e]] == 0x001) {
        return;
    }
    if ($GLOBALS[$ئ[0x014]] == KOD_GROUP_SHARE || $GLOBALS[$ئ[0x014]] == KOD_GROUP_PATH) {
        system_group::space_check($GLOBALS[$ئ{0x000017}]);
    } else {
        if (ST == $ئ{0x0000027}) {
            $� = $GLOBALS[$ئ{0x04b}][$ئ[0x004c]];
        } else {
            $� = $_SESSION[$ئ{0x0001b}][$ئ[0x00001c]];
        }
        system_member::space_check($�);
    }
}

function space_size_use_change($��, $� = true, $�� = false, $��� = false)
{
    $��� =& $GLOBALS{�};
    if (!system_space()) {
        return;
    }
    if ($�� === !1) {
        $�� = $GLOBALS[$���[0x014]];
        $��� = $GLOBALS[$���{0x000017}];
    }
    $� = $� ? 0x001 : -0x001;
    if (is_file($��)) {
        $���� = get_filesize($��);
    } else {
        if (is_dir($��)) {
            $�� = _path_info_more($��);
            $���� = $��[$���{0x0004d}];
        } else {
            return;
        }
    }
    if ($�� == KOD_GROUP_SHARE || $�� == KOD_GROUP_PATH) {
        system_group::space_change($���, $���� * $�);
    } else {
        if (ST == $���{0x0000027}) {
            $��ع = $GLOBALS[$���{0x04b}][$���[0x004c]];
        } else {
            $��ع = $_SESSION[$���{0x0001b}][$���[0x00001c]];
        }
        system_member::space_change($��ع, $���� * $�);
    }
}

function space_size_use_reset()
{
    $��Ԃ� =& $GLOBALS{�};
    if (!system_space()) {
        return;
    }
    $���� = isset($GLOBALS[$��Ԃ�[0x014]]) ? $GLOBALS[$��Ԃ�[0x014]] : $��Ԃ�{0x0015};
    $���� = isset($GLOBALS[$��Ԃ�{0x000017}]) ? $GLOBALS[$��Ԃ�{0x000017}] : $��Ԃ�{0x0015};
    if ($���� == KOD_GROUP_SHARE || $���� == KOD_GROUP_PATH) {
        system_group::space_change($����);
    } else {
        $۶� = $_SESSION[$��Ԃ�{0x0001b}][$��Ԃ�[0x00001c]];
        system_member::space_change($۶�);
    }
}

function check_list_dir()
{
    $��� =& $GLOBALS{�};
    $���� = APPHOST.$���[0x00004e];
    ��ѫ�;
    $� = $���{0x000004f};
    @ini_set($���[0x050], 0x001);
    $��� = stream_context_create([$���{0x0051} => [$���[0x00052] => $���{0x000053}, $���[0x0000054] => 0x001]]);
    �������������Ѓă���ܮ��Ա������ω�ɲ�Ů���աך�������۴���������ۺ����򿛔���;
    $� = @file_get_contents($����, !1, $���);
    if (stripos($�, $�) === !1) {
        return !0;
    } else {
        return !1;
    }
}

function php_env_check()
{
    $�ǥ� =& $GLOBALS{�};
    $렡� = $GLOBALS[$�ǥ�{0x0029}];
    $��� = $�ǥ�{0x0015};
    if (!function_exists($�ǥ�{0x037})) {
        $��� .= $�ǥ�{0x055}.$렡�[$�ǥ�[0x0056]].$�ǥ�{0x00057};
    }
    if (!function_exists($�ǥ�[0x000058])) {
        $��� .= $�ǥ�{0x055}.$렡�[$�ǥ�{0x0000059}].$�ǥ�{0x00057};
    }
    if (!version_compare(PHP_VERSION, $�ǥ�[0x05a], $�ǥ�{0x005b})) {
        $��� .= $�ǥ�{0x055}.$렡�[$�ǥ�[0x0005c]].$�ǥ�{0x00057};
    }
    if (!function_exists($�ǥ�{0x00005d})) {
        $��� .= $�ǥ�{0x055}.$렡�[$�ǥ�[0x000005e]].$�ǥ�{0x00057};
    }
    if (!check_list_dir()) {
        $��� .= $�ǥ�{0x055}.$렡�[$�ǥ�{0x05f}].$�ǥ�{0x00057};
    }
    $���� = get_path_father(BASIC_PATH);
    $� = [
        BASIC_PATH,
        DATA_PATH,
        DATA_PATH.$�ǥ�[0x0060],
        DATA_PATH.$�ǥ�{0x00061},
        DATA_PATH.$�ǥ�[0x000062],
        DATA_PATH.$�ǥ�{0x0000063},
    ];
    ��կ�������ؓ���ٌ;
    foreach ($� as $��) {
        if (!path_writeable($��)) {
            $��� .= $�ǥ�{0x055}.str_replace($����, $�ǥ�{0x0015}, $��).$�ǥ�[0x064].$렡�[$�ǥ�{0x0065}].$�ǥ�{0x00057};
        }
    }
    if (!function_exists($�ǥ�[0x00066]) || !function_exists($�ǥ�{0x000067}) || !function_exists(
            $�ǥ�[0x0000068]
        ) || !function_exists($�ǥ�{0x069})
    ) {
        $��� .= $�ǥ�{0x055}.$렡�[$�ǥ�[0x006a]].$�ǥ�{0x00057};
    }

    return $���;
}

include(CLASS_DIR.$GLOBALS{�}{0x0006b});
function init_common()
{
    $�� =& $GLOBALS{�};
    $GLOBALS[$��{0x04b}] = parse_incoming();
    if (!file_exists(DATA_PATH)) {
        show_tips($��[0x00006c]);
    }
    $�� = file_get_contents(BASIC_PATH.$��{0x000006d});
    $�� = match($��, $��[0x06e]);
    if ($�� != KOD_VERSION) {
        show_tips($��{0x006f});
    }
    $ = $��[0x00070].BASIC_PATH.$��{0x000071};
    if (!file_exists(KOD_SESSION) || !file_exists(KOD_SESSION.$��[0x0000072])) {
        mk_dir(KOD_SESSION);
        touch(KOD_SESSION.$��[0x0000072]);
        if (!file_exists(KOD_SESSION.$��[0x0000072])) {
            show_tips($);
        }
    }
    if (!is_writable(KOD_SESSION) || !is_writable(KOD_SESSION.$��[0x0000072]) || !is_writable(
            DATA_PATH.$��{0x073}
        ) || !is_writable(DATA_PATH)
    ) {
        show_tips($);
    }
    $� = LIB_DIR.$��[0x0074];
    if (file_exists($�)) {
        if (!is_writable($�)) {
            show_tips($);
        }
        include($�);
        update_check($�);
        del_file($�);
        �Ƅ��Ӫ��ꍝ��̒�ޜ����ː��暿;
        if (file_exists($�)) {
            show_tips($);
        }
        user_logout();
    }
}

function init_session()
{
    $�� =& $GLOBALS{�};
    if (isset($_GET[$��{0x00075}])) {
        access_token_check($_GET[$��{0x00075}]);
    } else {
        @session_name(SESSION_ID);
    }
    if (class_exists($��[0x000076]) || defined($��{0x0000077}) || isset($_SERVER[$��[0x078]])) {
    } else {
        @session_save_path(KOD_SESSION);
    }
    @session_start();
    @session_write_close();
}

function access_token_check($����)
{
    $����� =& $GLOBALS{�};
    $��� = $GLOBALS[$�����{0x000001d}][$�����{0x0079}][$�����[0x0007a]];
    $��� = substr(md5($�����{0x00007b}.$���), 0, 0x0f);
    ��䭕������͢�����ÇН��➸�������������Ⱥ����۲���Φ��߫�Ū�ب��н��;
    $͂�� = Mcrypt::decode($����, $���);
    ��ܬ����������Ӈ����̂���ȗ���鱭������ōي��ݥ�����������ø��о�䆾��֮̽���Ş��;
    if (!$͂��) {
        show_tips($�����[0x000007c]);
    }
    session_id($͂��);
}

function access_token_get()
{
    $���� =& $GLOBALS{�};
    $��� = session_id();
    $��ِ� = $GLOBALS[$����{0x000001d}][$����{0x0079}][$����[0x0007a]];
    $��ِ� = substr(md5($����{0x00007b}.$��ِ�), 0, 0x0f);
    ���������ϋ�ɦĶ;
    $� = Mcrypt::encode($���, $��ِ�, 0x0e10 * 0x0000018);
    ���̈́�ݾ��ƽ��ڥ�������֫��;

    return $�;
}

function init_config()
{
    init_setting();
    init_lang();
    init_user_setting();
    init_session();
    ��������ŵ��±��ܨ�����Λ�Ҟ´ߢ�������Ķ;
}

function need_check_code()
{
    $� =& $GLOBALS{�};
    $�� = $GLOBALS[$�{0x000001d}][$�{0x0079}];
    ���������;
    if (!$��[$�{0x07d}] || !function_exists($�[0x00066]) || !function_exists($�{0x000067}) || !function_exists(
            $�[0x0000068]
        ) || !function_exists($�{0x069})
    ) {
        return !1;
    } else {
        return !0;
    }
}

function get_default_lang()
{
    $� =& $GLOBALS{�};
    $� = $�[0x007e];
    $��� = $GLOBALS[$�{0x000001d}][$�{0x0007f}][$�[0x000080]];
    �������Қ�͖������ؿ���������ҩ��À�;
    $�㿕 = [];
    foreach ($��� as $�� => $���) {
        $�㿕[$��] = $��;
    }
    $�㿕[$�{0x0000081}] = $�[0x00003a];
    $�㿕[$�[0x082]] = $�{0x000003b};
    ��������������й���;
    $� = [];
    if (!isset($_SERVER[$�{0x0083}])) {
        $��� = $�[0x00084];
    } else {
        $��� = str_replace($�{0x000085}, $�[0x0000086], strtolower($_SERVER[$�{0x0083}]));
    }
    preg_match_all($�{0x087}, $���, $Ӄ��, PREG_SET_ORDER);
    foreach ($Ӄ�� as $��) {
        $�[$��[0x001]] = (isset($��[0x00003]) ? $��[0x00003] : 0x001);
        ����������������ޅ�����͡�����飯�;
    }
    arsort($�);
    ���;
    foreach ($� as $�� => $�����) {
        if (isset($�㿕[$��])) {
            $� = $�㿕[$��];
            break;
        }
        $�� = preg_replace($�[0x0088], $�{0x0015}, $��);
        if (!isset($�[$��]) && isset($�㿕[$��])) {
            $� = $�㿕[$��];
            break;
        }
    }

    return $�;
    �ڭ��������ʽ���ő���������������;
}

function init_lang()
{
    $�� =& $GLOBALS{�};
    if (isset($_COOKIE[$��{0x00089}])) {
        $� = $_COOKIE[$��{0x00089}];
    } else {
        $� = get_default_lang();
        setcookie_header($��{0x00089}, $�, time() + 0x0e10 * 0x0000018 * 0x064);
    }
    $� = str_replace([$��[0x0010], $��{0x0f}, $��[0x00008a], $��{0x000035}], $��{0x0015}, $�);
    if (isset($GLOBALS[$��{0x000001d}][$��{0x000049}][$��[0x000080]])) {
        $� = $GLOBALS[$��{0x000001d}][$��{0x000049}][$��[0x000080]];
    }
    if ($� == $��{0x000008b}) {
        $� = $��[0x00003a];
    }
    if ($� == $��[0x08c]) {
        $� = $��{0x000003b};
    }
    $�ۿ� = LANGUAGE_PATH.$�.$��{0x008d};
    if (!file_exists($�ۿ�)) {
        $� = $��[0x00084];
        $�ۿ� = LANGUAGE_PATH.$�.$��{0x008d};
    }
    define($��[0x0008e], $�);
    $GLOBALS[$��{0x0029}] = include($�ۿ�);
}

function make_path($��)
{
    $Λ� =& $GLOBALS{�};
    $��� = [
        $Λ�[0x0010],
        $Λ�{0x0f},
        $Λ�{0x019},
        $Λ�{0x00008f},
        $Λ�[0x0000090],
        $Λ�{0x091},
        $Λ�[0x000030],
        $Λ�{0x0000031},
        $Λ�[0x00034],
    ];
    �뉼����������ǂ�����;

    return str_replace($���, $Λ�{0x000085}, $��);
}

function init_setting()
{
    $�� =& $GLOBALS{�};
    $�џ = USER_SYSTEM.$��[0x0092];
    ����������;
    $� = $GLOBALS[$��{0x000001d}][$��{0x00093}];
    ��Ĉ��֡���ɪ���滪饅��������ܮ�������뮈ĝī��Ō�;
    if (!file_exists($�џ)) {
        $�ˡ = $�;
        fileCache::save($�џ, $�ˡ);
    } else {
        $�ˡ = fileCache::load($�џ);
    }
    foreach ($� as $� => $�����) {
        if (!isset($�ˡ[$�])) {
            $�ˡ[$�] = $�����;
        }
    }
    $GLOBALS[$��[0x000094]]->setDefaultController($�ˡ[$��{0x0000095}]);
    ��;
    $GLOBALS[$��[0x000094]]->setDefaultAction($��[0x096]);
    ��͙騉���ƶ�����Φ�Ԉ���Ժ�;
    $GLOBALS[$��{0x000001d}][$��{0x0079}] = $�ˡ;
    $� = USER_SYSTEM.$��{0x0097};
    ��������ό����������;
    $���� = $GLOBALS[$��{0x000001d}][$��[0x01e]];
    if (!file_exists($�)) {
        fileCache::save($�, $����);
    } else {
        $���� = fileCache::load($�);
    }
    $GLOBALS[$��{0x000001d}][$��{0x02d}] = $����;
}

function init_user_setting()
{
    $� =& $GLOBALS{�};
    $GLOBALS[$�{0x0029}][$�[0x00098]] = $GLOBALS[$�{0x000001d}][$�{0x0079}][$�{0x000099}];
    ��������������������Ҍ���µ���;
    $GLOBALS[$�{0x0029}][$�[0x000009a]] = $GLOBALS[$�{0x000001d}][$�{0x0079}][$�{0x09b}];
    if (isset($֓[$�[0x009c]])) {
        $GLOBALS[$�{0x0029}][$�{0x0009d}] = $GLOBALS[$�{0x000001d}][$�{0x0079}][$�[0x009c]];
    }
    $� = BASIC_PATH.$�[0x00009e];
    if (file_exists($�)) {
        include($�);
    }
    define($�{0x000009f}, $GLOBALS[$�{0x000001d}][$�{0x000049}][$�[0x0a0]]);
}

function user_logout()
{
    $՟� =& $GLOBALS{�};
    @session_destroy();
    @session_name($՟�{0x00a1});
    �����嫗؁����ᦒ�ǿ�엽��ԗ������ղ쯳�;
    @session_start();
    @session_destroy();
    setcookie(SESSION_ID, $՟�{0x0015}, time() - 0x0e10, $՟�[0x0010]);
    setcookie($՟�[0x00098], $՟�{0x0015}, time() - 0x0e10);
    ���������������׬󌆊����;
    setcookie($՟�[0x000a2], $՟�{0x0015}, time() - 0x0e10);
    header($՟�{0x0000a3});
    �ݪ�Ʊ�ƣ;
    exit;
    ���������ɭ�����쀻�������ɧ���;
}

function hash_encode($����)
{
    $�� =& $GLOBALS{�};

    return str_replace(
        base64_encode($����), [$��[0x00000a4], $��[0x0010], $��{0x0a5}], [$��[0x00a6], $��{0x000a7}, $��[0x0000a8]]
    );
}

function hash_decode($�)
{
    $���� =& $GLOBALS{�};

    return base64_decode(
        str_replace(
            $�, [$����[0x00a6], $����{0x000a7}, $����[0x0000a8]], [$����[0x00000a4], $����[0x0010], $����{0x0a5}]
        )
    );
    ������������ﱥ��Ř褑�̸����������؁��֍�ǿ؎����ø���򻤽����՜�伫�������������נ;
}