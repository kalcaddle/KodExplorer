/*! power by kodexplorer ver3.41(2017-03-06) [build 1488797373403] */
define("app/src/setting/main",["lib/jquery-lib","lib/util","lib/artDialog/jquery-artDialog","lib/contextMenu/jquery-contextMenu","../../common/core","./fav","./setting","./system/system_setting","./system/system","lib/ztree/ztree","./system/system_member","./system/system_group","./system/system_role"],function(e){e("lib/jquery-lib"),e("lib/util"),e("lib/artDialog/jquery-artDialog"),e("lib/contextMenu/jquery-contextMenu"),core=e("../../common/core"),Fav=e("./fav"),Setting=e("./setting"),e("./system/system_setting"),System=e("./system/system"),core.init()}),define("app/common/core",[],function(require,exports){search_box_tpl=require("./tpl/search.html"),search_list_tpl=require("./tpl/search_list.html"),upload_tpl=require("./tpl/upload.html");var search=require("./core.search"),tools=require("./core.tools"),upload=require("./core.upload"),api=require("./core.api"),playSound=require("./core.playSound");pathHashEncode=function(e){return hashEncode(e)},pathHashDecode=function(e){return hashDecode(e)};var initFirst=function(){if(window.require=require,template.config("escape",!1),template.config("compress",!0),template.helper("core",core),template.helper("window",window),"undefined"!=typeof G&&(1!=G.is_root&&$(".menu_system_setting").remove(),G.is_root||1==AUTH["system_member:get"]||1==AUTH["system_group:get"]||$(".menu_system_group").remove(),G.user_config&&"0"==G.user_config.animate_open&&($.dialog.defaults.animate=!1),resetHost()),$("html").bind("click",function(e){if(0==$(e.target).parents(".context-menu-list").length)try{rightMenu.hidden()}catch(e){}}),$.dialog.defaults.animate&&loadRipple(["a","button",".context-menu-item","#picker",".menuShareButton",".menuRecycleButton",".section .list"],[".disabled",".disable",".ztree",".disable-ripple"]),$("a,img").attr("draggable","false"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":Cookie.get("CSRF-TOKEN")}}),$(".common_footer [forceWap]").click(function(){var e=$(this).attr("forceWap");Cookie.set("forceWap",e),window.location.reload()}),core.setSkinDiy(),core.tools.init(),playserSupport(),"array"==$.type(window.kodReady))for(var e=0;window.kodReady.length>e;e++)window.kodReady[e]();titleTips()},resetHost=function(){var e=window.location.port?":"+window.location.port:"";G.web_host=window.location.protocol+"//"+window.location.hostname+e+"/",G.app_host=rtrim(G.web_host,"/")+window.location.pathname.replace("index.php","")},playserSupport=function(){var e={ie:{music:["mp3","m4a","aac"],movie:["mp4","m4v","flv","mov","f4v"]},chrome:{music:["mp3","wav","m4a","aac","oga","ogg","webma"],movie:["mp4","m4v","flv","mov","f4v","ogv","webm","webmv"]}},t=!!window.ActiveXObject||"ActiveXObject"in window,i="chrome";t&&(i="ie"),core.filetypes.music=e[i].music,core.filetypes.movie=e[i].movie},titleTips=function(){isWap()||require.async(["lib/poshytip/jquery.poshytip.js","lib/poshytip/skin.css"],function(){var e=$("[title]");e.poshytip({className:"ptips-skin",liveEvents:!0,slide:!1,alignTo:"cursor",alignX:"right",alignY:"bottom",showAniDuration:150,hideAniDuration:200,offsetY:10,offsetX:20,showTimeout:function(){var e=1500;return $(this).attr("title-timeout")&&(e=parseInt($(this).attr("title-timeout"))),e},content:function(){var e=$(this).data("title.poshytip");if($(this).attr("title-data")){var t=$($(this).attr("title-data"));e=t.is("input")||t.is("textarea")?t.val():t.html()}return e=e?e:"",e.replace(/\n/g,"<br/>")}}),$("body").bind("mousedown click",function(){$(e).poshytip("hide"),$(".ptips-skin").remove()}),$("input,textarea").live("focus",function(){$(e).poshytip("hide"),$(".ptips-skin").remove()})})};return{search:search,init:initFirst,serverDwonload:upload.serverDwonload,upload:upload.upload,uploadInit:upload.init,playSound:playSound.playSound,playSoundFile:playSound.playSoundFile,tools:tools,api:api,filetypes:{image:["jpg","jpeg","png","bmp","gif","ico","svg","cur","webp"],music:["mp3","wav","m4a","aac","oga","ogg","webma"],movie:["mp4","m4v","flv","mov","f4v","ogv","webm","webmv"],doc:["doc","docx","docm","xls","xlsx","xlsb","xlsm","ppt","pptx","pptm"],text:["txt","textile","oexe","inc","csv","log","asc","tsv","lnk","url","webloc","meta","localized","xib","xsd","storyboard","plist","csproj","pch","pbxproj","local","xcscheme","manifest","vbproj","strings","jshintrc","sublime-project","readme","changes","changelog","version","license","changelog","abap","abc","as","asp","aspx","ada","adb","htaccess","htgroups","htgroups","htpasswd","asciidoc","adoc","asm","a","ahk","bat","cmd","cpp","c","cc","cxx","h","hh","hpp","ino","c9search_results","cirru","cr","clj","cljs","cbl","cob","coffee","cf","cson","cakefile","cfm","cs","css","curly","d","di","dart","diff","patch","dockerfile","dot","dummy","dummy","e","ge","ejs","ex","exs","elm","erl","hrl","frt","fs","ldr","ftl","gcode","feature",".gitignore","glsl","frag","vert","gbs","go","groovy","haml","hbs","handlebars","tpl","mustache","hs","hx","html","hta","htm","xhtml","eex","html.eex","erb","rhtml","html.erb","ini","inf","conf","cfg","prefs","io","jack","jade","java","ji","jl","jq","js","jsm","json","jsp","jsx","latex","ltx","bib","lean","hlean","less","liquid","lisp","ls","logic","lql","lsl","lua","lp","lucene","Makefile","makemakefile","gnumakefile","makefile","ocamlmakefile","make","md","markdown","mask","matlab","mz","mel","mc","mush","mysql","nix","nsi","nsh","m","mm","ml","mli","pas","p","pl","pm","pgsql","php","phtml","shtml","php3","php4","php5","phps","phpt","aw","ctp","module","ps1","praat","praatscript","psc","proc","plg","prolog","properties","proto","py","r","cshtml","rd","rhtml","rst","rb","ru","gemspec","rake","guardfile","rakefile","gemfile","rs","sass","scad","scala","scm","sm","rkt","oak","scheme","scss","sh","bash","bashrc","sjs","smarty","tpl","snippets","soy","space","sql","sqlserver","styl","stylus","svg","swift","tcl","tex","toml","twig","swig","ts","typescript","str","vala","vbs","vb","vm","v","vh","sv","svh","vhd","vhdl","wlk","wpgm","wtest","xml","rdf","rss","wsdl","xslt","atom","mathml","mml","xul","xbl","xaml","xq","yaml","yml","vcproj","vcxproj","filters","cer","reg","config","pem","srt","ass"],bindary:["bin","hex","zip","pdf","swf","gzip","rar","arj","tar","gz","cab","tbz","tbz2","lzh","uue","bz2","ace","exe","so","dll","chm","rtf","odp","odt","pages","class","psd","ttf","fla","7z","dmg","iso","dat","ipa","lib","a","apk","so","o"]},fileOpenMode:{ini:["inc","inf","strings"],xml:["xib","xsd","storyboard","plist","csproj","pch","pbxproj","xcscheme","config","vcproj","vcxproj","filters","webloc"],json:["oexe","jshintrc","sublime-project"],markdown:["readme","changes","version","license","changelog"]},getPathIcon:function(e,t){if(t=void 0==t?"":t,"string"==$.type(e)){var i=trim(trim(e),"/");if(e={},"{"!=i.substring(0,1)||i.split("/").length>1)return{icon:"",name:""};e.path_type=i.match(/\{.*\}/),e.id=i.split(":")[1]}var a={};a[G.KOD_USER_SHARE]={icon:"userSelf",name:LNG.my_share},a[G.KOD_GROUP_PATH]={icon:"groupSelfOwner"},a[G.KOD_GROUP_SHARE]={icon:"groupGuest"},a[G.KOD_USER_RECYCLE]={icon:"recycle",name:LNG.recycle},a[G.KOD_USER_FAV]={icon:"treeFav",name:LNG.fav},a[G.KOD_GROUP_ROOT_SELF]={icon:"groupSelfRoot",name:LNG.my_kod_group},a[G.KOD_GROUP_ROOT_ALL]={icon:"groupRoot",name:LNG.kod_group};var n=a[e.path_type];return e.path_type==G.KOD_USER_SHARE&&G.user_id!=e.id?n={icon:"user",name:t}:e.path_type==G.KOD_GROUP_PATH&&"owner"==e.role&&(n={icon:"groupSelfOwner"}),void 0==n&&(n={icon:"",name:""}),void 0==n.name&&(n.name=t),n},isSystemPath:function(e){var e=trim(trim(e),"/");if(void 0==e||"{"!=e.substring(0,1)||e.split("/").length>1)return!1;var t=e.match(/\{.*\}/),i=[G.KOD_USER_SHARE,G.KOD_GROUP_SHARE,G.KOD_USER_RECYCLE,G.KOD_USER_FAV,G.KOD_GROUP_ROOT_SELF,G.KOD_GROUP_ROOT_ALL],a=!1;return-1!==$.inArray(t[0],i)&&(a=!0),a},pathPre:function(e){if(e=trim(trim(e),"/"),void 0==e||"{"!=e.substring(0,1))return"";var t=e.match(/\{.*\}/);return t[0]},contextmenu:function(e){try{rightMenu.hidden()}catch(t){}var t=e||window.event;return t?t&&$(t.target).is("textarea")||$(t.target).is("input")||$(t.target).is("p")||$(t.target).is("pre")||0!=$(t.target).parents(".can_right_menu").length||0!=$(t.target).parents(".topbar").length||0!=$(t.target).parents(".edit_body").length||0!=$(t.target).parents(".aui_state_focus").length?!0:!1:!0},pathThis:function(e){if(!e||"/"==e)return"";var t=rtrim(this.pathClear(e),"/"),i=t.lastIndexOf("/"),a=t.substr(i+1);if(0==a.search("fileProxy")){a=urlDecode(a.substr(a.search("&path=")));var n=a.split("/");a=n[n.length-1],""==a&&(a=n[n.length-2])}return a},pathClear:function(e){if(!e)return"";var t=e.replace(/\\/g,"/");return t=t.replace(/\/+/g,"/"),t=t.replace(/\.+\//g,"/")},pathFather:function(e){var t=rtrim(this.pathClear(e),"/"),i=t.lastIndexOf("/");return t.substr(0,i+1)},pathExt:function(e){var t=trim(e,"/");return-1!=t.lastIndexOf("/")&&(t=t.substr(t.lastIndexOf("/")+1)),-1!=t.lastIndexOf(".")?t.substr(t.lastIndexOf(".")+1).toLowerCase():t.toLowerCase()},path2url:function(e,t){if("http"==e.substr(0,4))return e;void 0==t&&(t=!0);var i,a=this.pathClear(e);this.pathExt(a);var n=function(e){if(!e)return"";var t=urlEncode(e);return t=t.replace(/%2F/g,"/")};return G.is_root&&t&&a.substring(0,G.web_root.length)==G.web_root?i=G.web_host+n(a.replace(G.web_root,"")):(i=G.app_host+"index.php?explorer/fileProxy&path="+urlEncode(a),G.share_page!==void 0&&(i=G.app_host+"index.php?share/fileProxy&user="+G.user+"&sid="+G.sid+"&path="+urlEncode(a))),i},pathReadable:function(e){if("object"!=typeof G.json_data)return!0;var t;t=G.json_data.filelist;for(var i=0;t.length>i;i++)if(t[i].path==e)return void 0==t[i].is_readable||1==t[i].is_readable?!0:!1;t=G.json_data.folderlist;for(var i=0;t.length>i;i++)if(t[i].path==e)return void 0==t[i].is_readable||1==t[i].is_readable?!0:!1;return!0},authCheck:function(e,t){return G.is_root?!0:AUTH.hasOwnProperty(e)?AUTH[e]?!0:(void 0==t&&(t=LNG.no_permission),Tips.tips(t,!1),!1):!0},ajaxError:function(e){var t=e.responseText,i='<div class="ajaxError">'+t+"</div>",a=$.dialog.list.ajaxErrorDialog;return Tips.close(LNG.system_error,!1),"<!--user login-->"==t.substr(0,17)?(setTimeout(function(){window.location.reload()},500),void 0):(a?a.content(i):$.dialog({id:"ajaxErrorDialog",padding:0,width:"60%",height:"50%",fixed:!0,resize:!0,ico:core.icon("error"),title:"ajax error",content:i}),void 0)},fileGet:function(e,t){var i="./index.php?editor/fileGet&filename="+urlEncode(e);G.share_page!==void 0&&(i="./index.php?share/fileGet&user="+G.user+"&sid="+G.sid+"&filename="+urlEncode(e)),$.ajax({url:i,dataType:"json",beforeSend:function(){Tips.loading(LNG.loading)},error:core.ajaxError,success:function(e){Tips.close(LNG.success),"function"==typeof t&&t(e.data.content)}})},fileInfo:function(e,t){var i="index.php?explorer/pathInfo";G.share_page!==void 0&&(i="index.php?share/pathInfo&user="+G.user+"&sid="+G.sid),$.ajax({url:i,type:"POST",dataType:"json",data:e,error:core.ajaxError,success:function(e){"function"==typeof t&&t(e)}})},fileLink:function(e,t){var i='list=[{"type":"file","path":"'+urlEncode(e)+'"}]&viewPage=1';this.fileInfo(i,function(e){var i=e.code?e.data.download_path:!1;return i?("function"==typeof t&&t(i),void 0):(Tips.tips(LNG.no_permission_action+"==>"+LNG.group_role_pathinfo,!1),void 0)})},setting:function(e){void 0==e&&(e=G.is_root?"system":"user"),ShareData.frameTop("Opensetting_mode")?ShareData.frameTop("Opensetting_mode",function(t){t.Setting.setGoto(e),$.dialog.list.setting_mode.display(!0)}):$.dialog.open("./index.php?setting#"+e,{id:"setting_mode",fixed:!0,ico:core.icon("setting"),resize:!0,title:LNG.setting,width:950,height:600})},copyright:function(){var e=require("./tpl/copyright.html"),t=template.compile(e),i=ShareData.frameTop();i.art.dialog({id:"copyright_dialog",bottom:0,right:0,simple:!0,resize:!1,title:LNG.about+" kod",width:425,padding:"0",fixed:!0,content:t({LNG:LNG,G:G})}),i.$(".copyright_dialog").addClass("animated-700 zoomIn")},qrcode:function(e,t){"./"==e.substr(0,2)&&(e=G.app_host+e.substr(2));var i="./index.php?user/qrcode&url="+quoteHtml(urlEncode(e)),a="<a href='"+quoteHtml(e)+"' s='"+e+"' target='_blank'><img src='"+i+"' style='border:1px solid #eee;'/></a>";$.dialog({follow:t,fixed:!0,resize:!1,title:LNG.qrcode,padding:30,content:a})},appStore:function(){var e=ShareData.frameTop();e.$.dialog.open("./index.php?app",{id:"app_store",fixed:!0,ico:core.icon("appStore"),resize:!0,title:LNG.app_store,width:900,height:550})},openWindow:function(e){var t=ShareData.frameTop(),i=t.$.dialog.open(e,{fixed:!0,resize:!0,width:"80%",height:"75%"});return i},openDialog:function(e,t,i,a){if(e){void 0==a&&(a="openDialog"+UUID());var n="<iframe frameborder='0' name='Open"+a+"' src='"+htmlEncode(e)+"' style='width:100%;height:100%;border:0;'></iframe>",o=ShareData.frameTop(),s=o.$.dialog({id:a,fixed:!0,title:i,ico:t,width:"75%",height:"70%",padding:0,content:n,resize:!0});return s}},openApp:function(app){if("url"==app.type){var icon=app.icon;-1==app.icon.search(G.static_path)&&"http"!=app.icon.substring(0,4)&&(icon=G.static_path+"images/file_icon/icon_app/"+app.icon),"number"!=typeof app.width&&-1===app.width.search("%")&&(app.width=parseInt(app.width)),"number"!=typeof app.height&&-1===app.height.search("%")&&(app.height=parseInt(app.height)),app.width||(app.width="90%"),app.height||(app.height="70%");var dialog_info={resize:app.resize,fixed:!0,ico:core.iconSrc(icon),title:app.name.replace(".oexe",""),width:app.width,height:app.height,simple:app.simple,padding:0},top=ShareData.frameTop();"swf"==core.pathExt(app.content)?(dialog_info.content=core.createFlash(app.content),top.$.dialog(dialog_info)):top.$.dialog.open(app.content,dialog_info)}else{var exec=app.content;eval("{"+exec+"}")}},update:function(){setTimeout(function(){var e=base64Decode("Ly9zdGF0aWMua2FsY2FkZGxlLmNvbS91cGRhdGUvbWFpbi5qcw==")+"?a="+UUID();require.async(e,function(e){try{e.todo("check")}catch(t){}})},200)},openPath:function(e){"undefined"!=typeof Config&&"explorer"==Config.pageApp?ui.path.list(e,"tips"):core.explorer(e)},explorer:function(e,t){void 0==e&&(e=""),void 0==t&&(t=core.pathThis(e));var i="./index.php?/explorer&type=iframe&path="+e;G.share_page!==void 0&&(i="./index.php?share/folder&type=iframe&user="+G.user+"&sid="+G.sid+"&path="+e);var a=ShareData.frameTop(),n=a.$.dialog.open(i,{className:"dialogExplorer",resize:!0,fixed:!0,ico:core.icon("folder"),title:t,width:"80%",height:"75%"}),o=20*a.$(".dialogExplorer").length;n.DOM.wrap.css({left:"+="+o+"px",top:"+="+o+"px"})},explorerCode:function(e){void 0==e&&(e="");var t="index.php?/editor&project="+e;G.share_page!==void 0&&(t="./index.php?share/code_read&user="+G.user+"&sid="+G.sid+"&project="+e),window.open(t)},setSkinFinished:function(){var e=$(".setSkin_finished").attr("src");e&&($("#link_css_list").attr("href",e),$(".setSkin_finished").remove())},setSkin:function(e){LocalData.set("theme",e),G.user_config.theme=e;var t=G.static_path+"style/skin/"+e+".css";t!=$("#link_css_list").attr("href")&&$("body").append('<img src="'+t+'" onload="core.setSkinFinished();" onerror="core.setSkinFinished();" class="hidden setSkin_finished">'),this.setSkinDiy()},setSkinDiy:function(){if(G.user_config){var e=LocalData.get("theme"),t="kod_diy_style",i=LocalData.getConfig(t);"object"!=typeof i&&"object"==typeof G.user_config.theme_diy&&(i=G.user_config.theme_diy),"object"!=typeof i&&(i={bg_blur:1,bg_image:G.static_path+"images/wall_page/9.jpg",bg_type:"color",start_color:"#456",end_color:"#000",color_rotate:"200"},LocalData.setConfig(t,i)),G.user_config.theme_diy=i;var a="";if("diy"==e&&i){var n=require("./tpl/theme_diy.html"),o=template.compile(n);a=o(i)}$.setStyle(a,t)}},editorFull:function(){var e=$("iframe[name=OpenopenEditor]");e.toggleClass("frame_fullscreen")},language:function(e){Cookie.set("kod_user_language",e,8760),window.location.reload()},fullScreen:function(){"true"==$("body").attr("fullScreen")&&core.exitfullScreen(),$("body").attr("fullScreen","true");var e=ShareData.frameTop(),t=e.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},exitfullScreen:function(){$("body").attr("fullScreen","false"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},createFlash:function(e,t,i){var a=UUID();(i===void 0||""==i)&&(i=a);var n="";$.browser.msie&&9>parseInt($.browser.version)&&(n='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"');var o='<object type="application/x-shockwave-flash" class="'+a+'" '+n+' name="'+i+'" id="'+i+'" data="'+e+'" width="100%" height="100%" tabindex="-1" >'+'<param name="movie" value="'+e+'"/>'+'<param name="allowfullscreen" value="true" />'+'<param name="allowscriptaccess" value="always" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="'+t+'" />'+'<param name="wmode" value="transparent" />'+'</object><div class="aui_loading" id="'+a+'_loading"><span>loading..</span></div>';return setTimeout(function(){var e=$("."+a);if(1!=e.length){var t=ShareData.frameTop();e=t.$("."+a)}if(1==e.length)var i=0,n=e[0],o=setInterval(function(){try{i++,100==Math.floor(n.PercentLoaded())?(e.next(".aui_loading").remove(),clearInterval(o),o=null):i>100&&(e.next(".aui_loading").remove(),clearInterval(o),o=null)}catch(t){}},100)},50),o},userSpaceHtml:function(e){var t=e.split("/"),i=parseFloat(t[0]),a=1073741824*parseFloat(t[1]),n=core.fileSize(parseFloat(t[0])),o=core.fileSize(a),s=n+"/",r=100*i/a;return r>=100&&(r=100),0==a||isNaN(a)?(s+=LNG.space_tips_full,r="0%"):(s+=o,r+="%"),s="<div class='space_info_bar'><div class='space_process'><div class='space_process_use' style='width:"+r+"'></div></div>"+"<div class='space_info'>"+s+"</div>"+"</div>"},fileSize:function(e,t){if(void 0==e||""==e)return"";if(void 0==t&&(t=1),1024>=e)return parseInt(e)+"B";e=parseInt(e);var i={G:1073741824,M:1048576,K:1024,B:1};for(var a in i)if(e>=i[a])return(e/i[a]).toFixed(t)+a},uploadCheck:function(e,t){return t=void 0==t?!0:t,"share"==G.share_page?"1"==G.share_info.can_upload:(void 0==e&&(e="explorer:fileUpload"),!G.is_root&&AUTH.hasOwnProperty(e)&&1!=AUTH[e]?(t&&Tips.tips(LNG.no_permission,!1),!1):G.json_data&&!G.json_data.info.can_upload?(t&&(core.isSystemPath(G.this_path)?Tips.tips(LNG.path_can_not_action,!1):Tips.tips(LNG.no_permission_write,!1)),!1):!0)}}}),define("app/common/tpl/search.html",[],"<div class='do_search'>\n	<div class='search_header'>\n		<div class='s_br'>\n			<input type='text' id='search_value'/><button class=\"btn btn-default btn-sm btn-right\"><i class=\"font-icon icon-search\"></i></button>\n			<div style='float:right'>{{LNG.path}}:<input type='text' id='search_path' title=\"\" title-data=\"#search_path\" title-timeout=\"100\"/></div>\n		</div>\n		<div class='s_br'>\n			<input type='checkbox' id='search_is_content' class=\"kui-checkbox size-small\"/>\n			<label for='search_is_content'>{{LNG.search_content}}</label>\n			<input type='checkbox' id='search_is_case' class=\"kui-checkbox size-small\"/>\n			<label for='search_is_case'>{{LNG.search_uplow}}</label>\n			<div style='float:right'>\n				{{LNG.file_type}}:<input type='text' id='search_ext' title='{{LNG.search_ext_tips}}' title-timeout=\"100\"/>\n			</div>\n		</div>\n	</div>\n	<div class=\"search_desc\"></div>\n	<div class='search_result'>\n		<ul class=\"file-items\"></ul>\n	</div>\n</div>\n\n"),define("app/common/tpl/search_list.html",[],'<!-- 文件夹列表 -->\n{{each data.folderlist as v i}}\n	 <li class="file-item open" data-path="{{v.path | window.pathHashEncode}}" data-type="folder" data-ext="folder">\n		<div class="file-info">\n			<span class="switch"><i class="font-icon icon-file-alt"></i></span>\n			<span class="file-icon">{{\'folder\' |core.icon}}</span>\n			<span class="title" title="{{LNG.goto}} {{v.path | window.htmlEncode}}">{{v.name | searchResultPrase}}</span>\n			<span class="goto" title="{{LNG.open_the_path}}"><i class="icon-folder-open-alt"></i></span>\n		</div>\n	</li>\n{{/each}}\n\n<!-- 文件列表 -->\n{{each data.filelist as v i}}\n	{{if v.search_info}}\n	<li class="file-item open" data-path="{{v.path | window.pathHashEncode}}" data-type="file" data-ext="{{v.ext}}">\n		<div class="file-info file-result">\n			<span class="switch"><i class="font-icon icon-caret-right"></i></span>\n			<span class="file-icon">{{v.ext |core.icon}}</span>\n			<span class="title" title="{{LNG.goto}} {{v.path | window.htmlEncode}}">{{v.name | window.htmlEncode}}</span>\n			<span class="result-num">{{v.search_info.length}}</span>\n			<span class="goto" title="{{LNG.open_the_path}}"><i class="icon-folder-open-alt"></i></span>\n		</div>\n		<ul class="result-item">\n			{{each v.search_info as value index}}\n			<li class="result-info">\n				<span class="line" data-line="{{value.line}}">{{value.line}}:</span>\n				<span class="search-info">{{#value.str | searchResultPrase}}</span>\n			</li>\n			{{/each}}\n		</ul>\n	</li>\n	{{else}}\n	<li class="file-item open" data-path="{{v.path | window.pathHashEncode}}" data-type="file-name" data-ext="{{v.ext}}">\n		<div class="file-info">\n			<span class="switch"><i class="font-icon icon-file-alt"></i></span>\n			<span class="file-icon">{{v.ext |core.icon}}</span>\n			<span class="title" title="{{LNG.goto}} {{v.path | window.htmlEncode}}">{{v.name | searchResultPrase}}</span>\n			<span class="goto" title="{{LNG.open_the_path}}"><i class="icon-folder-open-alt"></i></span>\n		</div>\n	</li>\n	{{/if}}\n{{/each}}\n\n'),define("app/common/tpl/upload.html",[],'<div class=\'file_upload\'>\n	<div class=\'top_nav\'>\n	   <a href=\'javascript:void(0);\' class=\'menu this tab_upload\'>{{LNG.upload_local}}</a>\n	   <a href=\'javascript:void(0);\' class=\'menu tab_download\'>{{LNG.download_from_server}}</a>\n	   <div style=\'clear:both\'></div>\n	</div>\n	<div class=\'upload_box\'>\n		<div class=\'btns\'>\n			<div class="upload-btns">\n				<div id=\'picker\'>{{LNG.upload_select}}</div>\n				\n				<div id=\'picker_folder\' class="hidden">select Folder</div>\n				<div class="upload_cert_box hidden">\n					<button title="More" type="button" class="upload_cert dropdown-toggle" data-toggle="dropdown">\n						<span class="caret"></span>\n					</button>\n					<ul class="dropdown-menu pull-left animated menuShow">\n						<li><a href="javascript:void(0);" class="drag_upload_folder" draggable="false">{{LNG.folder}}</a></li>\n					</ul>\n				</div>\n			</div>\n			\n			<div class="upload_box_tips">\n				<div class="btn-group btn-group-xs">\n					<button title="{{LNG.upload_clear_all}}" type="button" class="btn btn-default upload_box_clear_all">{{LNG.upload_clear_all}}</button>\n					<button id="set_icon" title="{{LNG.upload_clear}}" type="button" class="btn btn-default upload_box_clear">{{LNG.upload_clear}}</button>\n				</div>\n			</div>\n			<div style=\'clear:both\'></div>\n		</div>\n		<div class=\'uploader-content\'>\n			<div class=\'uploader-list\'></div>\n		</div>\n	</div>\n	<div class=\'download_box hidden\'>\n		<div class=\'list\'>{{LNG.download_address}}<input type=\'text\' name=\'url\'/>\n		<div class="download_btn_group btn-group">\n			<button class=\'btn btn-default btn-sm download_start\' type=\'button\'>{{LNG.download}}</button>\n			<button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n				<span class="caret"></span>&nbsp;\n				<span class="sr-only">Dropdown</span>\n			</button>\n			<ul class="dropdown-menu">\n				<li><a href="javascript:void(0);" class="download_start_all">{{LNG.upload_add_more}}</a></li>\n			</ul>\n		</div>\n\n		</div>\n		<div style=\'clear:both\'></div>\n		<div id=\'downloader\'>\n			<div class=\'download_list\'></div>\n		</div>\n	</div>\n</div>\n'),define("app/common/core.search",[],function(){return function(e,t){var i,a,n=function(){var n=trim(core.pathClear(t),"/");if(0==n.indexOf(G.KOD_USER_SHARE)&&-1==n.indexOf("/")||n==G.KOD_USER_FAV||n==G.KOD_GROUP_ROOT_ALL)return Tips.tips(LNG.path_cannot_search,!1),void 0;template.helper("searchResultPrase",r);var o=template.compile(search_box_tpl);0==$(".dialog_do_search").length?(i=$.dialog({id:"dialog_do_search",padding:0,fixed:!0,ico:core.icon("search"),resize:!0,title:LNG.search,width:440,height:480,content:o({LNG:LNG})}),a=c(),a.path=t,""!=e&&(a.search=e),$("#search_path").val(a.path),$("#search_value").val(a.search),l()):($.dialog.list.dialog_do_search.display(!0),e&&$("#search_value").val(e),$("#search_path").val(t),s())},o=function(){return a={search:$("#search_value").val(),path:$("#search_path").val(),is_content:Number($("#search_is_content").is(":checked")),is_case:Number($("#search_is_case").is(":checked")),ext:$("#search_ext").val()}},s=function(){o(),p(a)},r=function(e){var t=htmlEncode($("#search_value").val());if(e=htmlEncode(e),a.is_case)e=e.replace(t,'<span class="keyword">'+t+"</span>");else{var i=e.toLowerCase().indexOf(t.toLowerCase());e=e.substr(0,i)+'<span class="keyword">'+e.substr(i,t.length)+"</span>"+e.substr(i+t.length)}return e},l=function(){$("#search_value").die("keyup").live("keyup",function(){"editor"==!Config.pageApp&&ui.path.setSearchByStr($(this).val())}),$("#search_value,#search_ext,#search_path").keyEnter(s),$(".search_header .btn").die("click").live("click",s),$(".search_result .file-item .file-info").die("click").live("click",function(e){var t=$(this).parent();return t.toggleClass("open"),t.find(".result-item").slideToggle(200),stopPP(e),!1}),$(".search_result .file-item .file-info .goto").die("click").live("click",function(e){var t=$(this).parent().parent(),i=pathHashDecode(t.attr("data-path")),a=core.pathFather(i);return core.openPath(a),setTimeout(function(){Config&&"explorer"==Config.pageApp&&ui.path.setSelectByFilename(i)},200),stopPP(e),!1}),$(".search_result .file-item .file-info .title").die("click").live("click",function(e){var t=$(this).parent().parent(),i=pathHashDecode(t.attr("data-path"));return ui.pathOpen.open(i,t.attr("data-ext")),stopPP(e),!1}),$(".search_result .file-item .result-info").die("click").live("click",function(e){var t=$(this).parent().parent(),i=pathHashDecode(t.attr("data-path"));$(".search_result .file-item .result-info.this").removeClass("this"),$(this).addClass("this");var a=parseInt($(this).find(".line").attr("data-line"));return ShareData.data("FILE_SEARCH_AT",{search:$("#search_value").val(),line:a,lineIndex:$(this).parent().find("[data-line="+a+"]").index($(this).find(".line"))}),ui.pathOpen.openEditorForce(i,t.attr("data-ext")),stopPP(e),!1}),$(".search_header input[type=checkbox]").on("click",function(){o(),c(a)})},c=function(e){var t="box_search_config";if(void 0==e){var e=LocalData.getConfig(t);return e||(e={search:"",is_content:0,is_case:0,ext:""}),$("#search_value").val(e.search).textSelect(),e.is_content?$("#search_is_content").attr("checked","checked"):$("#search_is_content").removeAttr("checked"),e.is_case?$("#search_is_case").attr("checked","checked"):$("#search_is_case").removeAttr("checked"),$("#search_ext").val(e.ext),e}return LocalData.setConfig(t,e)},d=function(e){var t=$(".file-items"),i=$(".search_desc");if(!e.code)return i.html(e.data),t.html(""),void 0;if(0==e.data.filelist.length&&0==e.data.folderlist.length)return i.html(LNG.search_null),t.html(""),void 0;var n=template.compile(search_list_tpl);if(t.html(n({code:e.code,data:e.data,LNG:LNG})),a.is_content){for(var o=e.data.filelist,s=0,r=0;o.length>r;r++)o[r].search_info&&(s+=o[r].search_info.length);i.html(LNG.search_result+": <b>"+s+"(in "+o.length+" files)</b>"),e.data.error_info&&i.html("<span>"+LNG.seach_result_too_more+"</span>")}else i.html(e.data.filelist.length+" "+LNG.file+", "+e.data.folderlist.length+LNG.folder+".")},p=function(e){c(e),$("#search_value").textFocus();var t=$(".file-items"),i=$(".search_desc");if(!e.search||!e.path)return i.html(LNG.search_info),t.html(""),void 0;var a="index.php?explorer/search";G.share_page!==void 0&&(a="index.php?share/search&user="+G.user+"&sid="+G.sid),$.ajax({url:a,dataType:"json",type:"POST",data:e,beforeSend:function(){i.hide().html(LNG.searching+'<img src="'+G.static_path+'images/common/loading.gif">').fadeIn(100)},error:function(){core.ajaxError(),i.html(LNG.error)},success:function(e){d(e)}})};n()}}),define("app/common/core.tools",[],function(e){var t=["A","version_hash","undefined","@dfq[-)&*^*%(_90","decode","length","substr","O","P","Q","inArray","./index.php?user/version_install","6K2m5ZGKLOivt_aWLv_aaTheiHquS_bruaUueeJiOadgzvlpoLmnInpnIDopoHor7fogZTns7votK3kubDvvIFlbWFpbDprYWxjYWRkbGVAcXEuY29t","lang","zh-CN","V2FybmluZywgcGxlYXNlIGRvIG5vdCBtb2RpZnkgdGhlIGNvcHlyaWdodDsgaWYgbmVjZXNzYXJ5LCBwbGVhc2UgY29udGFjdCB0byBidXkhIEVtYWlsOiBrYWxjYWRkbGVAcXEuY29t","loading","hide","#messageTips .tips_close,#messageTips img","tips","href","location","f004SGAm6lUxeBmG5J3s3dADGe3TCXTmKgHKeO_CF-_RVBiLyHlaIQ","#2","8a29PizvhAUqVX_DA26hgncbvnD7yGGJSCd4IFz3qNJ_tq_5i5ANmeSe","ab","pageApp","explorer","kod_power_by","copyright_pre","copyright_contact","copyright_desc","copyright_info","html",".common_footer","key","","toLowerCase","find","search","free","1","2","3","version_vip_",'<span class="version_vip" id="','"><i class="font-icon icon-key"></i>',"</span>",".menu-topbar_user .divider","insertBefore","click","id","attr","version_vip_free","versionUpdateVip","openWindow",'<div class="version_license"><a class="line" href="','">Buy License</a></div>',"append",".aui_content","wrap","DOM","text","live","die",".version_vip","top","longPress","support_space_not","addClass","body","remove",".menu_system_about,.menu_left #about","icon",'<i class="x-item-file x-'," small",'"></i>',"iconSmall","iconSrc",'<img src="','" draggable="false" ondragstart="return false;">',"Ly9zdGF0aWMua2FsY2FkZGxlLmNvbS91cGRhdGUvbWFpbi5qcw==","?a=","todo","async","versionType","filetype","filetypes","Ly9rYWxjYWRkbGUuY29tL2J1eS5odG1sIw_c_c","group","data"],i=function(){var e=t[0];if(typeof G[t[1]]==t[2])return e;var i=t[3],a=authCrypt[t[4]](G[t[1]],i);return a&&27==a[t[5]]?(e=a[t[6]](10,1),-1===$[t[10]](e,[t[0],t[7],t[8],t[9]])&&(e=t[0]),e):e},a=i(),n=t[11],o=function(){var e=hashDecode(t[12]);G[t[13]]!=t[14]&&(e=hashDecode(t[15])),alert(e),Tips[t[16]](e,!1),$(t[18])[t[17]](),setTimeout(function(){Tips[t[19]](e,!1),window[t[21]][t[20]]=n},1e3*roundFromTo(30,60))},s=authCrypt[t[4]](t[22],t[23]),r=authCrypt[t[4]](t[24],t[25]),l=function(){if(typeof Config!=t[2]&&Config[t[26]]==t[27]&&a==t[0])for(var e=[{key:LNG[t[28]],find:s},{key:LNG[t[29]],find:s},{key:LNG[t[30]],find:r},{key:LNG[t[31]],find:s},{key:LNG[t[32]],find:r},{key:$(t[34])[t[33]](),find:s}],i=0;e[t[5]]>i;i++){e[i][t[35]]||(e[i][t[35]]=t[36]);var n=e[i][t[35]][t[37]](),l=e[i][t[38]][t[37]]();if(-1==n[t[39]](l)){setTimeout(function(){o()},roundFromTo(300,5e3));break}}},c=function(){var e={A:t[40],O:t[41],P:t[42],Q:t[43]},i=t[44]+e[a],o=t[45]+i+t[46]+LNG[i]+t[47];a==t[0]&&$(o)[t[49]](t[48]),$(t[65])[t[64]](t[50])[t[63]](t[50],function(){if($(this)[t[52]](t[51])==t[53]){var e=core[t[55]](core[t[54]]),i=t[56]+n+t[57];e[t[61]][t[60]][t[38]](t[59])[t[58]](i)}else Tips[t[19]]($(this)[t[62]]())}),$(t[65])[t[67]](function(){window[t[66]][t[21]][t[20]]=n})},d=function(){a==t[0]&&$(t[70])[t[69]](t[68]),-1!==$[t[10]](a,[t[7],t[8],t[9]])&&$(t[72])[t[71]]()},p=function(){core[t[73]]=function(e,i){return t[74]+e+(i?t[75]:t[36])+t[76]},core[t[77]]=function(e){return core[t[73]](e,!0)},core[t[78]]=iconSrc=function(e){return t[79]+e+t[80]},setTimeout(function(){var i=base64Decode(t[81])+t[82]+UUID();e[t[84]](i,function(e){try{e[t[83]]()}catch(i){}})},2e3),core[t[85]]=a,core[t[86]]=core[t[87]],core[t[54]]=hashDecode(t[88])+G[t[13]],l(),c(),d()},u=function(e){return a==t[0]&&-1==e[t[37]]()[t[39]](s)?(o(),!1):!0},f=function(e,i){var n,o,s={A:1,O:10,P:50,Q:1e3},r={A:10,O:50,P:200,Q:1e3},l=[],c=1;if(i==t[89]?(n=e[t[90]],o=s[a]):(n=e[t[90]],o=r[a]),1e3==o)l=n;else for(var d in n){if(c>o)break;l[d]=n[d],c++}return l},h={init:p,about:u,systemData:f};return h
}),define("app/common/core.upload",[],function(require,exports){var uploadUrl=function(){var e=G.app_host+"index.php?explorer/fileUpload";return"share"==G.share_page&&"1"==G.share_info.can_upload&&(e=G.app_host+"index.php?share/fileUpload&user="+G.user+"&sid="+G.sid),e};return{serverDwonload:function(e,t){core.uploadCheck("explorer:serverDownload");var i=$(".download_box"),a=i.find(".download_list");if(i.find("input").val(""),!e)return Tips.tips("url false!",!1),void 0;"ftp"!=e.substr(0,3)&&"http"!=e.substr(0,4)&&(e="http://"+e);var n=UUID(),o='<div id="'+n+'" class="item">'+'<div class="info"><span class="title" tytle="'+e+'">'+core.pathThis(e)+"</span>"+'<span class="size">0b</span>'+'<span class="state">'+LNG.upload_ready+"</span>"+'<a class="remove font-icon icon-remove" href="javascript:void(0)"></a>'+'<div style="clear:both"></div></div></div>';a.find(".item").length>0?$(o).insertBefore(a.find(".item:eq(0)")):a.append(o);var s,r,l,c=0,d=$("#"+n),p=$("#"+n+" .state").text(LNG.download_ready),u=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%;text-align:right;"></div></div>').appendTo("#"+n).find(".progress-bar");$("#"+n+" .remove").bind("click",function(){clearInterval(s),s=!1,clearTimeout(r),r=!1,$.get("./index.php?explorer/serverDownload&type=remove&uuid="+n),$(this).parent().parent().slideUp(function(){$(this).remove(),ui.f5()})});var f,h=function(e){clearTimeout(f),f=!1,f=setTimeout(function(){ui.f5Callback(function(){ui.path.setSelectByFilename(e)})},600)},m=function(){$.ajax({url:"./index.php?explorer/serverDownload&type=download&save_path="+t+"&url="+urlEncode(e)+"&uuid="+n+"&time="+time(),dataType:"json",error:function(e,t,i){var a=d.data("progcess");return 200!=e.status&&a&&a.support_range?(setTimeout(function(){m()},1e3),void 0):(core.ajaxError(e,t,i),200==e.status&&(clearInterval(s),s=!1,clearTimeout(r),r=!1,u.parent().remove(),p.addClass("error").text(LNG.download_error)),void 0)},success:function(e){return 0==e.code&&"downloading"==e.data?(setTimeout(function(){m()},1e3),void 0):(e.code?(h(e.info),p.text(LNG.download_success),$("#"+n+" .info .title").text(core.pathThis(e.info)),$("#"+n+" .info .title").attr("title",e.info)):p.addClass("error").text(e.data),clearInterval(s),s=!1,clearTimeout(r),r=!1,u.parent().remove(),void 0)}})};m();var _=function(){$.ajax({url:"./index.php?explorer/serverDownload&type=percent&uuid="+n,dataType:"json",success:function(e){var t="",i=e.data;if(s){if(!e.code)return p.text(LNG.loading),void 0;if(i){if(i.size=parseFloat(i.size),i.time=parseFloat(i.time),l){var a=(i.size-l.size)/(i.time-l.time);if(c>.2*a){var n=c;c=a,a=n}else c=a;t=core.fileSize(a)+"/s"}if(d.data("progcess",i),0==i.length)d.find(".progress-bar").css("width","0%"),p.text(LNG.loading);else{var o=100*(i.size/i.length);d.find(".progress-bar").css("width",o+"%"),p.text(o.toFixed(1)+"%("+t+")")}d.find(".size").text(core.fileSize(i.length)),d.find(".title").text(i.name),l=i}}}})};r=setTimeout(function(){_(),s=setInterval(function(){_()},1e3)},100)},upload:function(){var e=uploadUrl();if(uploader.option("server",e),uploader.option("method","POST"),0!=$(".dialog_file_upload").length)return $.dialog.list.dialog_file_upload.display(!0),void 0;var t=template.compile(upload_tpl),i=WebUploader.Base.formatSize(G.upload_max);$.dialog({padding:5,resize:!0,ico:core.icon("upload"),id:"dialog_file_upload",fixed:!0,title:LNG.upload_muti,content:t({LNG:LNG,maxsize:i}),close:function(){$.each(uploader.getFiles(),function(e,t){uploader.skipFile(t),uploader.removeFile(t)}),$.each($(".download_list .item"),function(){$(this).find(".remove").click()})}}),$(".file_upload .top_nav a.menu").unbind("click").bind("click",function(){$(this).hasClass("tab_upload")?($(".file_upload .tab_upload").addClass("this"),$(".file_upload .tab_download").removeClass("this"),$(".file_upload .upload_box").removeClass("hidden"),$(".file_upload .download_box").addClass("hidden")):($(".file_upload .tab_upload").removeClass("this"),$(".file_upload .tab_download").addClass("this"),$(".file_upload .upload_box").addClass("hidden"),$(".file_upload .download_box").removeClass("hidden"))}),$(".download_box [name=url]").keyEnter(function(){core.serverDwonload($(".download_box input").val(),G.this_path)}),$(".file_upload .download_box .download_start").unbind("click").bind("click",function(){core.serverDwonload($(".download_box input").val(),G.this_path)}),$(".file_upload .download_box .download_start_all").unbind("click").bind("click",function(){$.dialog({id:"server_dwonload_textarea",fixed:!0,resize:!1,ico:core.icon("upload"),width:"420px",height:"270px",padding:10,title:LNG.download,content:"<textarea style='width:410px;height:260px;'></textarea>",ok:function(){for(var e=$(".server_dwonload_textarea textarea").val().split("\n"),t=0;e.length>t;t++)core.serverDwonload(e[t],G.this_path)}})}),uploader.addButton({id:"#picker"}),uploader.addButton({id:"#picker_folder"});var a=function(){if("1"==Cookie.get("forceWap"))return!1;var e=document.createElement("input");return e.type="file",e.webkitdirectory!==void 0||e.directory!==void 0};a()&&($(".upload_cert_box").removeClass("hidden"),$(".file_upload .drag_upload_folder").unbind("click").bind("click",function(){$("#picker_folder input").attr("webkitdirectory","").attr("directory",""),$("#picker_folder label").click()}))},init:function(){var chunkSize=G.upload_max;WebUploader.Uploader.register({"before-send":"checkChunk"},{checkChunk:function(e){var t=this.owner,i=(e.blob.getSource(),$.Deferred());return t.md5File(e.blob).fail(function(){i.resolve()}).then(function(t){if(1==e.chunks)return i.resolve(),void 0;if(0==e.chunk)$.ajax({url:uploadUrl(),dataType:"json",data:{upload_to:e.file.upload_to,file_name:e.file.name,check_md5:t,chunk:e.chunk,chunks:e.chunks},error:function(){i.resolve()},success:function(t){t.code?(i.reject(),e.file.checkChunk=t.info):i.resolve()}});else{var a=e.file.checkChunk;if(a&&a["part_"+e.chunk]==t){var n=e.end/e.total;uploader.trigger("uploadProgress",e.file,n),i.reject()}else i.resolve()}}),i.promise()}}),eval("‍‌‌‌‍‌‌‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‍‌‍‍‍‍‍‍‌‌‌‍‌‍‌‍‌‌‌‍‍‍‍‍‌‍‍‍‍‌‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‌‍‌‍‍‌‌‌‌‍‌‍‌‍‌‍‌‌‌‍‌‌‍‍‌‍‌‍‌‌‍‍‍‌‍‍‌‍‌‍‌‍‌‍‌‌‌‍‍‍‍‍‌‌‍‌‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‍‍‌‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‌‌‌‍‍‌‍‍‍‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‌‍‌‍‍‌‌‌‍‌‌‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‌‌‍‌‍‍‍‌‍‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‍‌‍‌‌‍‍‌‍‌‍‌‌‍‌‌‌‌‍‌‌‌‍‌‍‌‍‌‌‌‍‌‍‍‍‍‌‍‌‍‍‍‍‌‌‍‍‌‌‍‍‌‌‌‍‌‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‌‍‌‍‍‍‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‌‍‍‌‌‌‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‍‌‍‍‌‍‌‌‍‍‌‌‍‍‍‌‍‌‍‍‍‍‌‌‌‍‌‍‍‍‌‌‌‌‍‍‌‍‌‌‌‍‍‍‍‍‌‌‍‍‌‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‌‌‍‍‍‌‍‍‍‍‍‍‌‌‍‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‍‌‍‌‌‍‌‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‌‌‌‍‌‍‌‌‌‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‍‍‍‌‌‍‌‌‍‍‍‌‍‌‌‌‌‌‍‌‌‍‌‍‍‍‍‌‌‌‍‌‍‍‍‌‌‍‌‌‍‌‍‌‌‍‌‌‍‍‍‍‌‌‌‌‍‌‍‍‌‌‌‌‍‌‍‍‌‍‍‍‌‍‍‌‌‌‍‌‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‌‌‍‍‌‌‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‌‍‌‍‌‌‍‍‌‍‍‍‍‌‍‍‍‌‍‍‌‌‌‌‌‍‍‍‌‌‌‌‌‍‍‍‌‌‍‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‍‍‍‌‍‌‌‍‌‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‌‌‌‍‌‍‌‌‌‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‍‍‍‌‌‍‌‌‍‍‍‌‍‌‌‌‌‌‍‌‌‍‌‍‍‍‍‌‌‌‍‌‍‍‍‌‌‍‌‌‍‌‍‌‌‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‌‌‍‍‍‌‌‍‌‌‍‌‍‍‍‍‍‌‍‌‍‍‍‍‍‌‍‍‍‌‍‍‌‌‌‍‌‍‌‍‌‌‌‍‍‍‍‍‌‌‍‍‌‍‍‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‌‍‌‍‌‍‌‌‌‌‌‍‌‌‍‍‍‌‍‍‌‌‍‌‌‌‌‍‌‌‌‌‍‍‍‍‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‍‍‌‌‌‌‍‌‍‍‌‌‌‌‍‌‍‍‌‍‌‌‍‌‍‍‌‌‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‍‌‌‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‍‌‍‍‍‍‍‍‌‌‍‍‍‍‌‍‍‌‌‌‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‍‍‌‍‍‍‍‌‌‍‌‌‌‍‍‌‍‍‌‌‌‌‍‍‌‍‌‌‌‍‍‍‍‍‌‌‌‍‌‍‍‍‍‌‍‌‌‌‍‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‌‌‍‍‍‌‌‍‌‌‍‌‌‌‌‍‌‌‍‍‌‍‍‍‌‌‍‍‌‍‌‍‍‌‍‌‍‍‍‍‍‌‍‍‍‌‍‍‍‌‌‍‍‍‌‍‍‌‌‌‍‍‍‍‍‌‌‍‍‌‌‍‌‌‍‍‍‍‌‍‌‌‍‌‍‍‍‍‌‌‍‌‍‌‌‍‌‍‍‌‍‍‌‍‌‌‌‍‍‍‍‍‍‌‌‍‍‌‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‍‍‌‌‌‌‍‌‌‍‍‌‍‌‍‌‌‌‍‌‌‍‍‌‌‌‌‍‍‍‍‌‌‍‌‌‍‍‍‌‍‍‌‌‍‌‍‌‍‍‍‌‍‌‍‌‍‌‍‌‍‍‍‌‍‍‌‌‌‍‍‌‌‍‍‍‌‍‍‌‍‍‍‌‌‌‍‌‍‌‌‍‌‍‍‌‌‍‍‌‌‌‍‌‌‍‍‌‍‌‍‌‍‍‌‍‍‍‍‌‍‍‌‍‍‍‍‌‍‌‌‍‍‍‍‌‌‍‌‌‍‌‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‍‍‍‌‌‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‌‌‍‌‍‌‍‍‌‍‍‌‍‍‍‍‌‌‍‌‍‌‍‍‍‍‍‌‍‌‍‌‍‍‍‌‌‍‌‍‌‌‍‍‌‌‍‌‍‍‍‌‌‌‍‍‌‍‍‌‌‍‍‍‌‍‍‌‍‌‍‌‍‌‍‌‍‍‌‌‌‍‍‌‌‌‍‌‍‌‍‍‌‌‍‌‍‌‍‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‍‌‍‍‍‍‌‌‍‌‍‍‌‌‌‍‍‌‌‍‍‍‍‌‍‌‍‌‍‍‍‍‍‌‍‍‌‌‌‌‍‌‌‍‍‍‌‍‍‌‌‍‌‌‌‍‍‌‌‌‍‍‌‌‍‌‌‍‌‍‌‍‍‌‍‍‌‌‌‌‍‌‍‌‍‍‌‌‍‌‍‍‍‌‍‌‍‍‌‌‍‌‌‍‍‌‍‌‌‍‌‍‍‌‌‌‌‍‍‍‍‌‍‍‍‍‌‌‍‌‌‍‍‍‌‌‍‌‌‍‌‌‍‍‍‌‌‍‍‌‍‌‍‌‍‌‍‍‌‍‍‌‍‌‍‌‌‍‍‌‌‌‍‍‍‍‍‌‍‌‍‌‍‍‍‌‍‍‍‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‍‌‍‌‍‌‌‍‌‌‌‌‍‌‍‌‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‌‍‍‍‌‍‌‌‍‌‌‍‍‍‌‌‍‍‌‌‌‍‌‌‌‌‍‌‍‍‌‌‍‍‍‍‌‍‌‍‍‍‌‌‌‍‌‍‌‌‍‌‍‍‌‍‍‍‍‍‌‍‌‌‌‍‌‍‌‍‌‍‍‌‌‍‌‍‍‌‌‍‌‍‌‍‌‌‍‌‍‍‍‍‌‍‌‍‌‌‍‍‌‍‌‌‌‌‌‍‌‍‍‌‌‍‍‍‌‍‍‌‍‌‌‍‌‍‍‍‍‍‌‍‍‌‌‍‍‍‍‍‍‌‍‍‍‌‍‍‍‌‍‌‌‍‍‍‍‌‍‍‍‌‍‍‌‍‌‌‌‌‌‍‍‌‌‍‍‌‌‍‍‌‌‍‍‌‍‍‌‍‍‍‍‍‍‍‍‌‍‍‍‍‌‍‌‍‍‍‍‍‌‍‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‍‍‌‍‌‍‌‌‍‌‍‌‍‌‍‌‍‌‍‌‍‌‍‌‍‌‍‍‌‍‍‌‍‌‍‍‍‌‍‍‍‍‌‍‌‍‍‍‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‌‌‌‍‍‍‌‍‌‌‌‍‌‍‌‍‌‌‍‌‍‍‌‍‌‌‌‍‍‌‍‍‌‌‍‍‌‍‌‍‍‌‍‌‌‌‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‌‍‌‌‌‌‍‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‌‍‍‍‌‌‍‍‌‌‍‍‌‌‌‍‌‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‍‌‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‌‍‌‌‍‌‌‌‌‍‌‌‍‌‌‌‍‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‍‌‍‍‍‌‌‌‍‍‌‍‍‌‌‌‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‍‍‍‍‌‍‍‌‍‌‌‌‍‍‌‌‌‍‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‍‌‍‍‍‌‌‍‌‌‌‌‍‍‌‍‌‍‍‍‍‍‌‍‍‍‌‍‍‍‌‌‍‍‍‌‍‍‌‍‌‌‍‌‍‍‌‌‍‍‌‍‍‍‌‍‍‍‌‍‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‍‍‍‌‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‍‌‌‍‌‌‍‌‍‍‍‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‌‌‌‍‌‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‌‌‌‍‌‍‌‌‍‍‍‌‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‍‍‌‌‍‌‌‍‌‍‍‍‍‍‌‍‌‍‍‍‍‌‌‍‍‍‍‌‍‍‌‍‌‍‍‌‍‌‌‌‌‍‌‌‍‌‌‌‌‌‍‌‍‌‌‌‌‌‍‌‍‍‌‍‌‌‍‍‍‌‌‌‍‍‍‍‍‌‌‍‍‍‍‌‍‌‌‌‍‍‌‍‍‌‌‌‍‍‌‌‍‌‌‍‍‌‍‌‍‌‍‍‌‍‍‌‍‌‌‍‌‌‌‍‍‌‌‌‍‌‍‍‍‍‌‍‌‍‍‍‍‌‍‍‌‌‍‌‍‌‌‍‍‍‍‌‍‌‌‌‍‌‍‍‍‌‌‍‌‍‍‍‍‍‌‍‌‌‌‍‍‌‌‌‍‍‌‍‍‌‌‍‍‍‍‌‍‌‌‍‌‌‌‍‍‌‌‍‍‌‍‍‍‌‌‍‌‌‌‌‍‌‌‍‌‌‍‌‍‍‌‍‌‍‍‍‍‍‌‍‌‍‍‌‍‍‌‍‌‍‌‍‍‍‌‌‍‍‌‍‍‍‌‌‍‌‍‌‍‍‌‍‌‍‌‌‍‍‌‌‍‌‍‌‍‍‌‍‌‍‍‌‍‍‌‍‌‍‌‍‍‍‌‌‍‍‍‌‍‍‌‌‍‍‍‍‍‍‌‌‍‍‍‍‍‍‌‌‍‍‍‍‍‍‌‍‌‍‍‌‍‍‌‌‌‍‌‌".replace(/.{8}/g,function(e){return String.fromCharCode(parseInt(e.replace(/\u200c/g,1).replace(/\u200d/g,0),2))})),uploader=upCreate({swf:G.static_path+"js/lib/webuploader/Uploader.swf",dnd:"body",threads:5,compress:!1,resize:!1,prepareNextFile:!0,duplicate:!0,chunkRetry:10,chunked:!0,chunkSize:chunkSize}),$(".uploader-content .success").die("click").live("click",function(){var e=$(this).find("span.title").attr("data-name");e&&("explorer"==Config.pageApp?ui.path.list(core.pathFather(e),"tips",function(){ui.path.setSelectByFilename(e)}):core.explorer(core.pathFather(e)))}),$(".uploader-content .open").die("click").live("click",function(e){var t=$(this).parent().find("span.title").attr("data-name");ui.pathOpen.open(t),stopPP(e)}),$(".upload_box_clear").die("click").live("click",function(){$(".uploader-list .item.success,.uploader-list .item.error").each(function(){$(this).slideUp(300,function(){$(this).remove()})})}),$(".upload_box_clear_all").die("click").live("click",function(){$.each(uploader.getFiles(),function(e,t){uploader.skipFile(t),uploader.removeFile(t)}),$(".uploader-list .item").each(function(){$(this).remove()})}),$(".uploader-content .remove").die("click").live("click",function(e){var t=$(this).parent().parent().attr("id");$(this).parent().parent().slideUp(function(){$(this).remove()}),uploader.skipFile(t),uploader.removeFile(t,!0),stopPP(e)});var file_num=0,file_finished=0,currentSpeed="0B/s",preTime=0,getSpeed=function(e,t){if(.3>=timeFloat()-preTime)return currentSpeed;preTime=timeFloat();var i=e.size*t,a=5;e.speed===void 0?e.speed=[[timeFloat()-.5,0],[timeFloat(),i]]:a>=e.speed.length?e.speed.push([timeFloat(),i]):(e.speed=e.speed.slice(1,a),e.speed.push([timeFloat(),i]));var n=e.speed[e.speed.length-1],o=e.speed[0],s=(n[1]-o[1])/(n[0]-o[0]);return 0>=s&&(s=0),s=core.fileSize(s)+"/s",currentSpeed=s,s},selectNameArr=[],changeDelayTimer,pathReload=function(e){clearTimeout(changeDelayTimer),changeDelayTimer=!1,changeDelayTimer=setTimeout(function(){var t=selectNameArr;ui.f5Callback(function(){if(ui.path.setSelectByFilename(t),e&&(selectNameArr=[],"explorer"==Config.pageApp)){if("share"==G.share_page)return;ui.tree.checkIfChange(G.this_path)}})},600)};uploader.on("fileQueued",function(e){if(!core.uploadCheck())return uploader.skipFile(e),uploader.removeFile(e),void 0;var t;try{t=e.source.source.fullPath,void 0!=e.source.source.webkitRelativePath&&""!=e.source.source.webkitRelativePath&&(t=e.source.source.webkitRelativePath)}catch(i){}if(e.fullPath=t,e.source&&e.source.source&&1==e.source.source.isDirectory&&e.source.source.fullPath)return ui.pathOperate.newFolder(G.this_path+e.fullPath),uploader.skipFile(e),uploader.removeFile(e),void 0;if(0==e.size)return ui.pathOperate.newFile(G.this_path+e.fullPath),uploader.skipFile(e),uploader.removeFile(e),file_finished++,file_num++,void 0;var a=e.fullPath;e.finished=!1,e.upload_to=G.this_path,(void 0==a||"undefined"==a)&&(a=e.name),file_num++;var n=$(".uploader-list"),o='<div id="'+e.id+'" class="item"><div class="info">'+'<span class="title" title="'+htmlEncode(e.upload_to+a)+'" data-name="'+htmlEncode(e.upload_to+a)+'">'+htmlEncode(core.pathThis(a))+"</span>"+'<span class="size">'+core.fileSize(e.size)+"</span>"+'<span class="state">'+LNG.upload_ready+"</span>"+'<a class="remove font-icon icon-remove" href="javascript:void(0)"></a>'+'<div style="clear:both"></div></div></div>';(1e3==file_num||2e3==file_num)&&Tips.tips(LNG.upload_tips_more,"warning"),0==n.length?setTimeout(function(){$(".uploader-list").prepend(o),uploader.upload()},100):(n.prepend(o),uploader.upload())}).on("uploadBeforeSend",function(e,t){var i=urlEncode(e.file.fullPath);(void 0==i||"undefined"==i)&&(i=""),t.fullPath=i,t.upload_to=e.file.upload_to}).on("uploadProgress",function(e,t){$(".dialog_file_upload .aui_title").text(LNG.uploading+": "+file_finished+"/"+file_num+" ("+currentSpeed+")");var i=getSpeed(e,t),a=$("#"+e.id),n=a.find(".progress .progress-bar");n.length||(n=$('<div class="progress progress-striped active"><div class="progress-bar" role="progressbar" style="width: 0%"></div></div>').appendTo(a).find(".progress-bar")),a.find(".state").text((100*t).toFixed(1)+"%("+i+")"),n.css("width",100*t+"%")}).on("uploadAccept",function(e,t){if(e.file.serverData=t,!t.code)return e.serverNeedRetry=!0,!1;try{e.file.fullPath||selectNameArr.push(t.info)}catch(i){}}).on("uploadSuccess",function(e){var t=$("#"+e.id);if(!t.inScreen()){var i=36*t.index(".item");$(".uploader-content").scrollTop(i)}file_finished++;var a=e.serverData;if(a&&a.data){var n=LNG[a.data];a.code?($("#"+e.id).addClass("success"),$("#"+e.id).find(".state").text(n),$("#"+e.id).find(".remove").addClass("icon-ok").addClass("open").removeClass("icon-remove").removeClass("remove")):($("#"+e.id).addClass("error").find(".state").addClass("error"),$("#"+e.id).find(".state").text(n).attr("title",n))}uploader.removeFile(e),$("#"+e.id).find(".progress").fadeOut(),e.fullPath||pathReload(!1)}).on("uploadError",function(e,t){var i=LNG.upload_error+"("+t+")";if(e.serverData)if(e.serverData.data){var a=e.serverData.data;i=LNG[a]?LNG[a]:a}else e.serverData._raw&&(i=e.serverData._raw);file_finished++,$("#"+e.id).find(".progress").fadeOut(),$("#"+e.id).addClass("error").find(".state").addClass("error"),$("#"+e.id).find(".state").html(i).attr("title",i)}).on("uploadFinished",function(){$(".dialog_file_upload .aui_title").text(LNG.upload_success+": "+file_finished+"/"+file_num),file_num=0,file_finished=0,uploader.reset(),pathReload(!0)}).on("error",function(e){Tips.tips(e,!1)});var timer;inState=!1,dragOver=function(){if(0==inState){if(inState=!0,!core.uploadCheck(void 0,!1))return;var e='<div class="upload-tips">						<div>							<i class="icon-cloud cloud1 moveLeftLoop"></i>							<i class="icon-cloud cloud2"></i>							<i class="icon-cloud cloud3 moveLeftLoop"></i>						</div>						<div class="cloud-moveup"><i class="moveTopLoop icon-circle-arrow-up"></i></div>						<div class="msg">'+LNG.upload_drag_tips+"</div>					</div>";MaskView.tips(e),$("#windowMaskView").css({background:"#4285f4",opacity:"0.8"})}timer&&window.clearTimeout(timer)},dragLeave=function(e){stopPP(e),timer&&window.clearTimeout(timer),timer=window.setTimeout(function(){inState=!1,MaskView.close()},100)},dragDrop=function(e){try{if(e=e.originalEvent||e,core.uploadCheck())if(e.dataTransfer.files.length>0&&e.dataTransfer.files[0].name)core.upload(),core.playSound("drag_upload");else{var t=e.dataTransfer.getData("text/plain");t&&"http"==t.substring(0,4)&&ui.pathOperate.appAddURL(t)}stopPP(e)}catch(e){}inState&&(inState=!1,MaskView.close())}}}}),define("app/common/core.api",[],function(){var e=function(e,t,i){var a=$(i.DOM.wrap),n=t.frames.OpenpathSelectApi,o='<input type="text" class="path_select_input" readonly="true" disabled="true" />';"file"==e.type&&(o+='<span class="label label-primary">'+e.allowExt+"</span>"),$(o).insertBefore(a.find(".aui_state_highlight"));var s=function(t){var i=e.allowExt.split("|"),a=core.pathExt(t);return""==e.allowExt||""!=e.allowExt&&-1!=$.inArray(a,i)?!0:!1},r=function(){var t=n.ui.fileLight.fileListSelect(),i=[];if(e.single){var a=$(t.get(0));if("all"==e.type&&0==t.length)i={file:[],folder:[]};else if("file"==e.type&&0==t.length)i=[];else if("folder"==e.type)i=[n.G.this_path],a.hasClass("folderBox")&&(i=[n.ui.fileLight.path(a)]);else if("file"==e.type){if(a.hasClass("fileBox")){var o=n.ui.fileLight.path(a);s(o)&&(i=[o])}}else if("all"==e.type)if(a.hasClass("folderBox")){var o=n.ui.fileLight.path(a);i=[{file:[],folder:[o]}]}else if(a.hasClass("fileBox")){var o=n.ui.fileLight.path(a);s(o)&&(i={file:[o],folder:[]})}}else{var r=[],l=[];t.each(function(){if($(this).hasClass("fileBox")){var e=n.ui.fileLight.path($(this));s(e)&&r.push(e)}else $(this).hasClass("folderBox")&&l.push(n.ui.fileLight.path($(this)))}),"folder"==e.type?i=l:"file"==e.type?i=r:"all"==e.type&&(i={file:r,folder:l})}c(i)},l=function(e){var e=trim(e,"/");return e==G.KOD_GROUP_ROOT_SELF||e==G.KOD_GROUP_ROOT_ALL||e==G.KOD_USER_FAV||e==G.KOD_USER_SHARE?!1:!0},c=function(t){var i=a.find(".path_select_input"),o=a.find(".aui_state_highlight");if("all"!=e.type){for(var s=[],r=0;t.length>r;r++)l(t[r])&&s.push(t[r]);t=s}if(0==t.length||"all"==e.type&&0==t.file.length&&0==t.folder.length)o.addClass("disable"),i.attr("result",""),i.val("");else{var c=hashEncode(jsonEncode(t)),d="";if(e.single)d=n.core.pathThis(t[0]);else{var p=t;"all"==e.type&&(p=t.folder.concat(t.file)),$.each(p,function(e,t){d+=n.core.pathThis(t)+", "})}o.removeClass("disable"),i.attr("result",c),i.val(d)}},d=function(){n.ui.fileLight.select.hook("select",n.ui.fileLight,{before:function(){},after:function(){r()}})};n.kodReady||(n.kodReady=[]),n.kodReady.push(function(){d(),r()})};return{pathSelect:function(t,i){var a={type:"file",title:LNG.path_api_select_file,single:!0,allowExt:"",firstPath:!1},n="./index.php?/explorer&type=iframe";t=$.extend(a,t),t.firstPath&&(n+="&path="+t.firstPath);var o=ShareData.frameTop(),s=o.$.dialog.open(n,{id:"pathSelectApi",resize:!0,fixed:!0,ico:core.icon("folder"),title:t.title,lock:!0,background:"#000",opacity:.1,width:840,height:420,ok:function(){if("function"==typeof i){var e=s.DOM.wrap,a=e.find(".path_select_input").attr("result");a=jsonDecode(hashDecode(a)),a?t.single&&"all"!=t.type?i(a[0]):i(a):Tips.tips(LNG.error,!1)}},cancel:!0});e(t,o,s)},randomImage:function(e){$.getJSON("//kalcaddle.com/tools/version/?wallpage/index&lang="+G.lang+"&callback=?",function(t){"function"==typeof e&&e(t)})}}}),define("app/common/core.playSound",["./myPlayer"],function(e){var t={file_remove:"file_remove.mp3",recycle_clear:"recycle_clear.mp3",folder_open:"folder_open.mp3",window_min:"window_min.mp3",error:"error_tips.mp3",drag_upload:"drag_upload.mp3",drag_drop:"drag_drop.mp3"},i=function(t){var i="x-play-sound";0==$("."+i).length&&$('<div style="width:0px;height:0px;" class="'+i+'"></div>').appendTo("body");var a=G.static_path+"others/sound/"+t,n=e("./myPlayer");n.playSound(a,$("."+i))};return{playSoundFile:i,playSound:function(e){G&&G.user_config&&"1"==G.user_config.sound_open&&setTimeout(function(){i(t[e])},100)}}}),define("app/common/tpl/copyright.html",[],'<div class="copyright_dialog_content">\n	<div class="title">\n		<div class="logo"><i class="icon-cloud"></i>{{if core.versionType==\'A\'}}KodExplorer {{else}} {{LNG.kod_name}} {{/if}} v{{G.version}}</div>\n		<div class=\'info\'>——{{LNG.kod_name_copyright}}</div>\n	</div>\n	<div class="content">\n		<p>{{#LNG.copyright_desc}}</p>\n		<div>{{#LNG.copyright_contact}}</div>\n		<div>{{#LNG.copyright_info}}</div> \n	</div>\n</div>\n'),define("app/common/tpl/theme_diy.html",[],"@media screen and (max-width:100000px) {\n	body .full_background{\n		position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;\n		background-color: #020202;background-size: 100% 100%;\n	}\n\n	{{if blur_size= (bg_blur==0?0:10) }}{{/if}}\n	body .full_background:before{\n		-webkit-filter: blur({{blur_size}}px);\n		-moz-filter: blur({{blur_size}}px);\n		-ms-filter: blur({{blur_size}}px);\n		filter: blur({{blur_size}}px);\n	}\n	{{if bg_type == 'image'}}\n		body .full_background,\n		body .full_background:before,\n		body #body .menu_left,\n		body #body .app_menu_left,\n		body .aui_buttons,\n		body .aui_state_focus .aui_title,body .aui_title{\n			background-image:url({{bg_image}});\n		}\n		body .aui_state_focus .aui_title,body .aui_title{\n			background-size:100%;\n		}\n	{{else}}\n		body .full_background,\n		body .full_background:before,\n		body #body .menu_left, \n		body #body .app_menu_left,\n		body .aui_buttons,\n		body .aui_state_focus .aui_title,body .aui_title{\n			background:{{end_color}};\n			filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='{{start_color}}', endColorstr='{{end_color}}');\n			background-image: -webkit-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: -moz-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: -o-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: -ms-linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n			background-image: linear-gradient({{color_rotate}}deg, {{start_color}}, {{end_color}});\n		}\n	{{/if}}\n}\n"),define("app/src/setting/fav",[],function(){var e="index.php?fav/",t=function(t){$.ajax({url:e+"get",dataType:"json",async:!1,success:function(e){return e.code?(i(e.data,t),void 0):(Tips.tips(e),void 0)},error:function(){return!1}})},i=function(e,t){var i="<tr class='title'><td class='name'>"+htmlEncode(LNG.name)+"<span>("+LNG.can_not_repeat+")</span></td>"+"<td class='path'>"+htmlEncode(LNG.address)+"<span>("+LNG.absolute_path+")</span></td>"+"<td class='action'>"+LNG.action+"</td>"+"</tr>";for(var a in e)i+="<tr class='favlist' name='"+htmlEncode(e[a].name)+"' path='"+htmlEncode(e[a].path)+"'>"+"   <td class='name'><input type='text' id='sname' value='"+htmlEncode(e[a].name)+"' /></td>"+"   <td class='path'><input type='text' id='spath' value='"+htmlEncode(e[a].path)+"' /></td>"+"   <td class='action'>"+"		<button class='btn btn-default btn-sm edit'>"+LNG.button_save_edit+"</button>"+"		<button class='btn btn-default btn-sm del'>"+LNG.button_del+"</button>"+"   </td>"+"</tr>";if($("table#list").html(i),t&&"fav&"==t.substring(0,4)){var n=t.split("&")[1].split("=")[1],o=t.split("&")[2].split("=")[1],s=t.split("&")[3].split("=")[1];n=htmlEncode(urlDecode(n)),o=htmlEncode(urlDecode(o));var r="<tr class='favlist' name='' path=''>   <input type='hidden' id='stype' value='"+s+"' />"+"   <td class='name'><input type='text' id='sname' value='"+n+"' /></td>"+"   <td class='path'><input type='text' id='spath' value='"+o+"' /></td>"+"   <td class='action'>"+"		<button class='btn btn-default btn-sm addsave'>"+LNG.button_save+"</button>"+"		<button class='btn btn-default btn-sm addexit'>"+LNG.button_cancel+"</button>"+"   </td>"+"</tr>";$(r).insertAfter("table#list tr:last")}},a=function(){var e="<tr class='favlist' name='' path=''>   <input type='hidden' id='stype' value='folder' />   <td class='name'><input type='text' id='sname' value='' /></td>   <td class='path'><input type='text' id='spath' value='' /></td>   <td class='action'>		<button class='btn btn-default btn-sm addsave'>"+LNG.button_save+"</button>"+"		<button class='btn btn-default btn-sm addexit'>"+LNG.button_cancel+"</button>"+"   </td>"+"</tr>";$(e).insertAfter("table#list tr:last")},n=function(){var e=$(this).parent().parent();$(e).detach()},o=function(){var t=$(this).parent().parent(),i=$(t).find("#sname").val(),a=$(t).find("#spath").val(),n=$(t).find("#stype").val();return""==i||""==a?(Tips.tips(LNG.not_null,"error"),!1):($.ajax({url:e+"add&name="+urlEncode(i)+"&path="+urlEncode(a)+"&type="+n,dataType:"json",success:function(e){if(Tips.tips(e),e.code){$(t).attr("name",i),$(t).attr("path",a);var n="<button class='btn btn-default btn-sm edit'>"+LNG.button_save_edit+"</button>"+"<button class='btn btn-default btn-sm del'>"+LNG.button_del+"</button>";$(t).find("td.action").html(n),ShareData.frameTop("",function(e){e.ui.tree.refreshFav()})}}}),void 0)},s=function(){var i=$(this).parent().parent(),a=$(i).attr("name"),n=$(i).find("#sname").val(),o=$(i).find("#spath").val();return""==n||""==o?(Tips.tips(LNG.not_null,"error"),!1):($.ajax({dataType:"json",url:e+"edit&name="+urlEncode(a)+"&name_to="+urlEncode(n)+"&path_to="+urlEncode(o),success:function(e){Tips.tips(e),e.code&&($(i).attr("name",n),ShareData.frameTop("",function(e){e.ui.tree.refreshFav()}),t())}}),void 0)},r=function(){var t=$(this).parent().parent(),i=$(t).attr("name");$.ajax({url:e+"del&name="+urlEncode(i),dataType:"json",async:!1,success:function(e){Tips.tips(e),e.code&&($(t).detach(),ShareData.frameTop("",function(e){e.ui.tree.refreshFav()}))}})},l=function(){$(".fav .add").live("click",a),$(".fav .addexit").live("click",n),$(".fav .addsave").live("click",o),$(".fav .edit").live("click",s),$(".fav .del").live("click",r)};return l(),{init:t}}),define("app/src/setting/setting",[],function(e){var t,i=function(e){core.setSkin(e),ShareData.frameTop("",function(t){t.ui.setTheme(e)}),"diy"!=e?$(".theme_diy_setting").addClass("hidden"):$(".theme_diy_setting").removeClass("hidden")},a=function(e){core.setSkin(e)};template.helper("menu_info_decode",function(e){var t=htmlEncode(urlDecode(e));return t});var n=function(t){var i={about:e("./page/about.html"),fav:e("./page/fav.html"),help:e("./page/help.html"),member:e("./page/member.html"),system:e("./page/system.html"),theme:e("./page/theme.html"),user:e("./page/user.html"),wall:e("./page/wall.html")};return i[t]},o=function(e){(""==e||void 0==e)&&(e="user"),t=e,"fav&"==e.substring(0,4)&&(e="fav"),$(".selected").removeClass("selected"),$("ul.setting a#"+e).addClass("selected");var i=window.location.href;-1!=i.indexOf("#")&&(i=i.substr(0,i.indexOf("#"))),window.location.href=i+"#"+e,$.ajax({url:"./index.php?setting/slider&slider="+e,beforeSend:function(){$(".main").html("<img src='"+G.static_path+"images/common/loading.gif'/>")},success:function(i){if("about"==e){var a=i.data;if(i.data="",!core.tools.about(a))return;i.data=a}var o=$(".menu_left .selected").clone();o.find(".ripple_father").remove();var r="<div class='h1'>"+o.html()+"</div>",l=n(e),c=template.compile(l),d=c({urlDecode:urlDecode,LNG:LNG,G:G,data:i.data,info:i.info});$(".main").html(r+d),$(".main").fadeIn("fast"),"fav"==e&&Fav.init(t),"member"==e&&System.init(),"theme"==e&&s(),t=e,$("a,img").attr("draggable","false")}})},s=function(){seajs.use("lib/bootstrap-slider/bootstrap-slider.css"),seajs.use("lib/colorpicker/css/colorpicker.css"),e.async("lib/bootstrap-slider/bootstrap-slider.js",function(){$("#colorRotate").slider().on("slide",i)}),e.async("lib/colorpicker/js/colorpicker",function(){$(".colorpicker").remove(),$(".color_picker").ColorPicker({onBeforeShow:function(e){$(e).attr("input-name",$(this).attr("name")),$(this).ColorPickerSetColor(this.value)},onShow:function(e){return $(e).fadeIn(100),!1},onHide:function(e){return $(e).fadeOut(100),!1},onChange:function(e,t){var a=$("input[name="+$(this).attr("input-name")+"]");a.val("#"+t),i()}}).bind("keyup",function(){$(this).ColorPickerSetColor(this.value)})});var t=$(".theme_diy_setting");t.find("input[name]").unbind("change").bind("change",function(){var e=$(this).attr("name");"bg_type"==e&&($(".theme_bg_type_image,.theme_bg_type_color").addClass("hidden"),$(".theme_bg_type_"+$(this).val()).removeClass("hidden")),$(this).attr("data-slider-value")||i()}),t.find(".theme_diy_save").unbind("click").bind("click",function(){var e=G.user_config.theme_diy;$.ajax({url:"index.php?setting/set&k=theme_diy&v="+urlEncode(jsonEncode(e)),dataType:"json",success:function(e){Tips.tips(e)}})}),t.find(".color_list").each(function(){var e=jsonDecode($(this).attr("data-color"));$(this).css("background-image","linear-gradient("+e.color_rotate+"deg,"+e.start_color+","+e.end_color+")")}),t.find(".color_list").unbind("click").bind("click",function(){var e=jsonDecode($(this).attr("data-color"));$.each(e,function(e,a){var n=t.find("input[name="+e+"]");"color_rotate"==e?$("#colorRotate").slider("setValue",parseInt(a)):n.val(a),i()})});var i=function(){if("diy"==LocalData.get("theme")){var e={};t.find("input[name]").each(function(){var i=$(this).attr("name"),a=$(this).val();"checkbox"==$(this).attr("type")?a=Number($(this).is(":checked")):"radio"==$(this).attr("type")&&(a=t.find("[name="+i+"]:checked").val()),e[i]=a}),LocalData.setConfig("kod_diy_style",e),core.setSkin("diy"),ShareData.frameTop("",function(e){e.ui.setTheme("diy")})}}},r=function(){1!=G.is_root&&$("ul.setting #system").remove(),G.is_root||1==AUTH["system_member:get"]||1==AUTH["system_group:get"]?$("ul.setting #member").show():$("ul.setting #member").hide(),t=location.hash.split("#",2)[1],o(t),$("ul.setting a").click(function(){t!=$(this).attr("id")&&(t=$(this).attr("id"),o(t))}),$("#password_new").keyEnter(function(){Setting.tools()}),$(".user_config_setting .form_row input").die("change").live("change",function(){var e=$(this),t=e.attr("name"),i=e.val();"checkbox"==e.attr("type")&&(i=e.prop("checked")?"1":"0"),l(t,i)}),$(".path_select").die("click").live("click",function(){core.api.pathSelect({type:"file",title:LNG.path_api_select_image,allowExt:"png|jpg|bmp|gif|jpeg|ico|svg|tiff"},function(e){var e=core.path2url(e);$(".path_select").parent().find("input[type=text]").val(e).trigger("change"),Setting.tools()})}),$(".randomImage").die("click").live("click",function(){var e=$(this),t=function(e){var t=G.myhome+"picture/wallpage/";$.get("./index.php?explorer/mkdir&repeat_type=replace&path="+t,function(){$.get("./index.php?explorer/serverDownload&type=download&save_path="+t+"&url="+urlEncode(e))})};core.api.randomImage(function(i){e.addClass("moveCircle"),e.parent().find("input[type=text]").val(i).trigger("change"),1==$('.box[data-type="wall"]').length&&Setting.tools(),setTimeout(function(){e.removeClass("moveCircle")},1e3),t(i)})}),$(".box .list").live("hover",function(){$(this).addClass("listhover")},function(){$(this).toggleClass("listhover")}).live("click",function(){var e=$(this),t=e.parent();switch(type=t.attr("data-type"),value=e.attr("data-value"),t.find(".this").removeClass("this"),e.addClass("this"),type){case"wall":var a=G.static_path+"images/wall_page/"+value+".jpg";$("#wall_url").val(""),ShareData.frameTop("",function(e){e.ui.setWall(a)});break;case"theme":i(value);break;default:}l(type,value)}),$(".nav a").live("click",function(){$(".nav a").removeClass("this"),$(this).addClass("this");var e=$(this).attr("data-page");$(this).parent().parent().find(".panel").addClass("hidden"),$(this).parent().parent().find("."+e).removeClass("hidden")})},l=function(e,t){var i="index.php?setting/set&k="+e+"&v="+t;$.ajax({url:i,dataType:"json",success:function(e){e.code?Tips.tips(e):core.authCheck("setting:set")?Tips.tips(LNG.config_save_error_file,!1):Tips.tips(LNG.config_save_error_auth,!1)}})},c=function(){var e=$(".selected").attr("id");switch(e){case"user":var t=urlEncode($("#password_now").val()),i=urlEncode($("#password_new").val());if(""==i||""==t){Tips.tips(LNG.password_not_null,"error");break}$.ajax({url:"index.php?user/changePassword&password_now="+t+"&password_new="+i,dataType:"json",success:function(e){if(Tips.tips(e),e.code){var t=ShareData.frameTop();t.location.href="./index.php?user/logout"}}});break;case"wall":var a=$("#wall_url").val();if(""==a){Tips.tips(LNG.picture_can_not_null,"error");break}ShareData.frameTop("",function(e){e.ui.setWall(a)}),$(".box").find(".this").removeClass("this"),$.ajax({url:"index.php?setting/set&k=wall&v="+urlEncode(a),dataType:"json",success:function(e){Tips.tips(e)}});default:}};return r(),{setGoto:o,tools:c,setThemeSelf:a,setTheme:i}}),define("app/src/setting/page/about.html",[],'<div class="section">\n	<div class="content">{{#data}}</div>\n</div>\n'),define("app/src/setting/page/fav.html",[],'<div class="panel panel-default fav">\n	<table id=\'list\' align="center" border=0 cellspacing=0 cellpadding=0 ></table>\n	<a href="javascript:void(0);" class=\'add\'><i class="font-icon icon-plus"></i>{{LNG.button_add}}</a>\n</div>\n'),define("app/src/setting/page/help.html",[],'<div class="section">\n	<div class="content">{{#data}}</div>\n</div>\n'),define("app/src/setting/page/member.html",[],'<div class="system_conennt">\n	<div class="left_freame">\n		<div class="left_header">\n			<div class="tab this" id="system_group">{{LNG.system_group_edit}}</div>\n			<div class="tab" id="system_role">{{LNG.system_group_role}}</div>\n			<div style="clear:both"></div>\n		</div>\n		<div class="left_content system_group">\n			<div id="folderList"  class="ztree"></div>\n		</div>\n\n		<div class="left_content system_role">\n			<div class="role_box">\n				<ul class="role_list_cell"></ul>\n			</div>\n		</div>\n	</div>\n	<!-- left_frame end -->\n\n	<div class="right_frame" id="content_system_group">\n		<div class="header_content">\n			<div class="group_title">\n				<a href="javascript:void(0);" class="group_title_span title_tooltip" title="{{LNG.edit}}" data-action="group_edit">--</a>\n				<span class="label label-info" style="font-size: 12px;">id:<em class="group_id"></em></span>\n				<a href="javascript:void(0);" class="font-icon-label ml-20 title_tooltip" title="{{LNG.system_group_add}}" data-action="group_add_child"><i class="font-icon icon-plus"></i></a>\n\n				<a href="javascript:void(0);" class="font-icon-label title_tooltip" title="{{LNG.open_the_path}}" data-action="group_home" >\n					<i class="font-icon icon-folder-open"></i></a>\n				<span class="group_size">111/1.5</span>\n			</div>\n		</div>\n		<div class="content user_liser_content">\n		</div>\n	</div>\n	<!-- content_system_group end -->\n\n	<div class="right_frame" id="content_system_role">\n		<div class="header_content">\n			<div class="group_title">\n				<span class="role_title"></span>\n				<span class="label label-info" style="font-size: 12px;">id:<em class="role_id"></em></span>\n				<a href="javascript:void(0);" class="font-icon-label ml-20" data-action="role_add"><i class="font-icon icon-plus"></i></a>\n				<a href="javascript:void(0);" class="font-icon-label" data-action="role_delete" ><i class="font-icon icon-trash"></i></a>\n			</div>\n		</div>\n\n		<div class="section group_editor">\n			<div class="together input">\n				<div class="title"><i>{{LNG.group_name}}</i></div>\n				<input type="text" id=\'name\' data-before=""/>\n				<a href="javascript:;" class="button warning" \n					title=\'{{LNG.group_tips}}\' title-timeout="100"><i class="icon-warning-sign"></i>{{LNG.tips}}!</a>\n				<div style="clear:both;"></div>\n\n				<div class="title"><i>{{LNG.group_role_ext}}</i></div>\n				<input type="text" id=\'ext_not_allow\' default=\'php|asp|jsp\' value="php|asp|jsp"/>\n				<a href="javascript:;" class="button warning path_ext_tips" \n					title=\'{{LNG.group_role_ext_warning}}\' title-timeout="100"><i class="icon-warning-sign"></i>{{LNG.tips}}!</a>\n				<div style="clear:both;"></div>\n			</div>\n			<div class="together">\n				<div class="title" style="height:75px"><i>{{LNG.group_role_file}}</i></div>\n				<div class="tagdiv">\n					<a class="tag" href="javascript:;" data-role=\'explorer:mkfile;app:user_app\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_mkfile}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:mkdir\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_mkdir}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:pathRname\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_pathrname}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:pathDelete\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_pathdelete}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:pathInfo;explorer:pathInfoMuti\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_pathinfo}}</span>\n					</a>\n\n					<a class="tag" href="javascript:;" data-role=\'explorer:pathCopy;explorer:pathCute;explorer:pathCuteDrag;explorer:clipboard;explorer:pathPast\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_pathmove}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:zip\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_zip}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:unzip\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_unzip}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'explorer:search\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_search}}</span>\n					</a>\n					<a class="tag" href="javascript:;" data-role=\'editor:fileSave\'>\n						<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_filesave}}</span>\n					</a>\n					<div style="clear:both;"></div>\n				</div>\n				<div style="clear:both;"></div>\n			</div>\n			<div class="together">\n				<div class="title"><i>{{LNG.group_role_can_upload}}</i></div>\n				<a class="tag" href="javascript:;" data-role=\'explorer:fileUpload\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_upload}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'explorer:serverDownload\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_download}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'explorer:fileDownload\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_fileDownload}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'userShare:set;userShare:del\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_share}}</span>\n				</a>\n				<div style="clear:both;"></div>\n			</div>\n\n			<div class="together">\n				<div class="title"><i>{{LNG.group_role_config}}</i></div>\n				<a class="tag" href="javascript:;" data-role=\'user:changePassword\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_passowrd}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'setting:set\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_config}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'fav:edit;fav:add;fav:del\'>\n					<input type="checkbox" id="23" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.group_role_fav}}</span>\n				</a>\n				<div style="clear:both;"></div>\n			</div>\n\n			<div class="together combox">\n				<div class="title"><i>{{LNG.system_member_action}}</i></div>\n				<a class="tag" href="javascript:;" data-role=\'system_member:get\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_list}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'system_member:add\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_add}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'system_member:edit\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_edit}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'system_member:do_action\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_del}}</span>\n				</a>\n				<div style="clear:both;"></div>\n			</div>\n			<div class="together combox">\n				<div class="title"><i>{{LNG.system_group_action}}</i></div>\n				<a class="tag" href="javascript:;" data-role=\'system_group:get\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_list}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'system_group:add\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_add}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'system_group:edit\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_edit}}</span>\n				</a>\n				<a class="tag" href="javascript:;" data-role=\'system_group:del\'>\n					<input type="checkbox" class="checkbox kui-checkbox size-smallx blue"><span>{{LNG.action_del}}</span>\n				</a>\n				<div style="clear:both;"></div>\n			</div>\n\n			<div class="form_row from_row_submit">\n				<button class="btn btn-primary role_save_button" data-action="role_edit_save">{{LNG.button_save_submit}}</button>\n				<button class="btn btn-link revert" data-action="revert_all">{{LNG.button_select_all}}</button>\n			</div>\n		</div>\n\n	</div>\n	<!-- content_system_role end -->\n</div>\n</div><!-- 父元素结束 -->\n\n\n'),define("app/src/setting/page/system.html",[],'<div class="nav">\n	<a href="javascript:;"  class="this" data-page="setting">{{LNG.system_setting}}</a>\n	<a href="javascript:;" class="" data-page="setting_menu">{{LNG.system_setting_menu}}</a>\n	<div style="clear:both;"></div>\n</div>\n\n{{if  G.is_root}}\n	<div class="setting_tools_right">\n		{{if core.versionType !="A"}}\n			<button class="fl-right btn btn-default btn-sm system_setting_more">{{LNG.more}}</button>\n		{{/if}}\n\n		{{if verIndex={"A":"free","O":"1","P":"2","Q":"3"} }}{{/if}}\n		{{if verKey = "version_vip_"+verIndex[core.versionType] }}{{/if}}\n		<span class="version_vip" id="{{verKey}}"><i class="font-icon icon-key"></i>{{LNG[verKey]}}</span>\n	</div>\n{{/if}}\n\n\n<div class="panel panel-default setting system_setting">\n	<div class="panel-body">\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.system_name}}:</div>\n			<div class="setting_content">\n				<input type="text" name="system_name" value="{{data.system_name}}" /><i class="desc">{{LNG.system_name_desc}}</i>\n				<button  class="btn btn-default btn-sm" style="margin-left:20px;" onclick="core.update();">{{LNG.check_update}}</button>\n			</div>\n		</div>\n\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.system_desc}}:</div>\n			<div class="setting_content">\n				<input type="text" name="system_desc" value="{{data.system_desc}}" /><i class="desc">{{LNG.system_desc}}</i>\n			</div>\n		</div>\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.path_hidden}}:</div>\n			<div class="setting_content">\n				<input type="text" name="path_hidden" value="{{data.path_hidden}}" /><i class="desc">{{LNG.path_hidden_desc}}</i>\n			</div>\n		</div>\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.new_user_folder}}:</div>\n			<div class="setting_content">\n				<input type="text" name="new_user_folder" value="{{data.new_user_folder}}" /><i class="desc">{{LNG.new_user_folder_desc}}</i>\n			</div>\n		</div>\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.new_user_app}}:</div>\n			<div class="setting_content">\n				<input type="text" name="new_user_app" value="{{data.new_user_app}}"/><i class="desc">{{LNG.new_user_app_desc}}</i>\n			</div>\n		</div>\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.auto_login}}:</div>\n			<div class="setting_content">\n				<label>\n					<input type="checkbox" class="kui-checkbox-ios size-big" name="auto_login" {{if data.auto_login==\'1\'}}checked="checked"{{/if}} /><em></em>\n					<i style="width:450px;">{{#LNG.auto_login_desc}}</i>\n				</label>\n			</div>\n		</div>\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.need_check_code}}:</div>\n			<div class="setting_content">\n				<label>\n					<input type="checkbox" class="kui-checkbox-ios size-big" name="need_check_code" {{if data.need_check_code==\'1\'}}checked="checked"{{/if}} /><em></em>\n				</label>\n			</div>\n		</div>\n\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.first_in}}:</div>\n			<div class="setting_content">\n				<label><input type="radio" name="first_in" value="desktop" class="kui-radio"\n					{{if data.first_in==\'desktop\'}}checked="checked"{{/if}}/>{{LNG.ui_desktop}}</label>\n				<label><input type="radio" name="first_in" value="explorer" class="kui-radio"\n					{{if data.first_in==\'explorer\'}}checked="checked"{{/if}}/>{{LNG.ui_explorer}}</label>\n				<label><input type="radio" name="first_in" value="editor"  class="kui-radio"\n					{{if data.first_in==\'editor\'}}checked="checked"{{/if}}/>{{LNG.ui_editor}}</label>\n			</div>\n		</div>\n\n		<!-- 提交 -->\n		<div class="form_row from_row_submit">\n			<div class="setting_content">\n				<button class="btn btn-primary system_save">{{LNG.button_save}}</button>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="panel panel-default setting_menu hidden">\n	<table id="list" align="center" border="0" cellspacing="0" cellpadding="0">\n		<tbody>\n		<tr class="title">\n			<td width="10%">{{LNG.menu_name}}</td>\n			<td>{{LNG.url_path}}<span>({{LNG.url_path_desc}})</span></td>\n			<td>{{LNG.action}}</td>\n		</tr>\n\n		{{if data.menu.push({\'name\':\'\',\'type\':\'\',\'url\':\'\',\'target\':\'_blank\',\'use\':\'1\'}) }}{{/if}}\n		{{each data.menu as value key}}\n		{{if menu_system = value[\'type\'] == \'system\' ? \'menu_system\':\'\'}}{{/if}}\n		{{if menu_show = value[\'use\']  == \'1\' ? \'menu_show\':\'menu_hidden\'}}{{/if}}\n		{{if menu_add = value[\'name\']  == \'\' ? \'menu_default hidden\':\'\'}}{{/if}}\n		<tr class="menu_list {{menu_system}} {{menu_show}} {{menu_add}}">\n			<td class="name"><input type="text" name="name" value="{{value.name | menu_info_decode}}"/>\n				<span>{{if LNG[\'ui_\'+value[\'name\']]}} {{LNG[\'ui_\'+value[\'name\']]}} {{else}} null {{/if}}</span>\n			</td>\n			<td class="url">\n				<input type="text" name="url" value="{{value.url | menu_info_decode}}">\n				<span>{{value.name}}</span>\n				<label><input type="checkbox" name="target" class="kui-checkbox size-small" value="{{value.target}}"\n					{{if value.target==\'_blank\'}}checked="checked"{{/if}}/>{{LNG.menu_open_window}}</label>\n			</td>\n			<td class="action">\n				<button class=\'btn btn-default btn-sm move_up\'><i class="font-icon icon-arrow-up"></i></button>\n				<button class=\'btn btn-default btn-sm move_down\'><i class="font-icon icon-arrow-down"></i></button>\n				<button class=\'btn btn-default btn-sm move_hidden\'>\n					{{if value.use==\'1\'}} {{LNG.menu_hidden}} {{else}} {{LNG.menu_show}} {{/if}}\n				</button>\n				<button class=\'btn btn-default btn-sm move_del\'>{{LNG.menu_move_del}}</button>\n			</td>\n		</tr>\n		{{/each}}\n		</tbody>\n	</table>\n	\n	<a href="javascript:void(0)" class="add system_menu_add "><i class="icon-plus pr-10"></i>{{LNG.button_add}}</a>\n	<div class="form_row">\n		<button class="btn btn-primary system_menu_save">{{LNG.button_save}}</button>\n	</div>\n</div>\n\n\n{{if info}}\n<div class="alert alert-warning" role="alert">\n	<a href="#" class="close" data-dismiss="alert">&times;</a>\n	<div class="pl-10">\n		<h3>{{LNG.php_env_error}}<a href="javascript:;" class="button warning phpinfo"><i class="icon-warning-sign"></i>phpinfo</a></h3>\n		{{#info}}\n	</div>\n</div>\n{{/if}}\n'),define("app/src/setting/page/theme.html",[],'<div class="section">\n	<div class=\'box\' data-type="theme">\n	{{each data.setting_all.themeall.split(\',\') as value key}}\n	<div class=\'{{if value==data.user.theme}}this{{/if}} list\' data-value=\'{{value}}\'>\n		<div class=\'theme ico\'><img src=\'{{G.static_path}}images/thumb/theme/{{value}}.png\'/></div>\n		<div class=\'info\'>{{#LNG[\'theme_\'+value]}}</div>\n	</div>\n	{{/each}}\n	<div style="clear:both;"></div>\n	</div>\n</div>\n\n{{if config = G.user_config.theme_diy}}{{/if}}\n<div class="theme_diy_setting panel panel-default {{if G.user_config.theme!=\'diy\'}}hidden{{/if}}">\n	<div class="panel-heading"><h3 class="panel-title">{{LNG.theme_diy_title}}</h3></div>\n	<div class="panel-body">\n		<div class="form_row theme_bg_type">\n			<div class=\'setting_title\'>{{LNG.theme_diy_background}}:</div>\n			<div class="setting_content">\n				<label><input type="radio" class="kui-radio" name="bg_type" value="image" \n					{{if config.bg_type == \'image\'}}checked="checked"{{/if}} />{{LNG.theme_diy_image}}</label>\n				<label><input type="radio" class="kui-radio" name="bg_type" value="color" \n					{{if config.bg_type == \'color\'}}checked="checked"{{/if}} />{{LNG.theme_diy_color_blur}}</label>\n			</div>\n		</div>\n\n		<div class="theme_bg_type_image {{if config.bg_type != \'image\'}}hidden{{/if}}">\n			<div class="form_row theme_bg_blur">\n				<div class=\'setting_title\'>{{LNG.theme_diy_image_blur}}:</div>\n				<div class="setting_content">\n					<label class="disable-ripple">\n					<input type="checkbox" class="kui-checkbox-ios size-big" name="bg_blur"  {{if config.bg_blur==\'1\'}}checked="checked"{{/if}}/><em></em>\n					</label>\n				</div>\n			</div>\n			<div class="form_row theme_bg_image">\n				<div class=\'setting_title\'>{{LNG.theme_diy_image_url}}:</div>\n				<div class="setting_content file_select_input">\n					<input type="text" name="bg_image" value="{{config.bg_image}}"/> \n					<button class="path_select btn btn-default btn-right"><i class="font-icon icon-folder-open"></i></button>\n					<img class="randomImage" src="{{G.static_path+\'images/common/desktop/fengche.png\'}}" title="{{LNG.setting_wall}}"/>\n				</div>\n			</div>\n		</div>\n\n		<div class="theme_bg_type_color {{if config.bg_type != \'color\'}}hidden{{/if}}">\n			<div class="form_row ">\n				<div class=\'setting_title\'>{{LNG.theme_diy_color_start}}:</div>\n				<div class="setting_content">\n					<input type="text" name="start_color" class="color_picker" value="{{config.start_color}}"/>\n				</div>\n			</div>\n			<div class="form_row ">\n				<div class=\'setting_title\'>{{LNG.theme_diy_color_end}}:</div>\n				<div class="setting_content">\n					<input type="text" name="end_color" class="color_picker" value="{{config.end_color}}"/>\n				</div>\n			</div>\n			<div class="form_row ">\n				<div class=\'setting_title\'>{{LNG.theme_diy_color_radius}}:</div>\n				<div class="setting_content">\n					<input type="text" name="color_rotate" id = "colorRotate"\n					data-slider-id=\'colorRotateSlider\' \n					data-slider-min="0"\n					data-slider-max="360"\n					data-slider-step="1"\n					data-slider-value="{{config.color_rotate}}"/>\n				</div>\n			</div>\n\n			<div class="color_default">\n				<div class="color_list" data-color=\'{"start_color":"#93ad34","end_color":"#198a62","color_rotate":"310"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#5648c1","end_color":"#6fe3e7","color_rotate":"160"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#7b4397","end_color":"#2b85a6","color_rotate":"300"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#860073","end_color":"#4f1670","color_rotate":"300"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#248556","end_color":"#16226e","color_rotate":"165"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#d16645","end_color":"#13052e","color_rotate":"195"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#d23c39","end_color":"#dca74a","color_rotate":"320"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#7f7280","end_color":"#000000","color_rotate":"160"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#77cfa0","end_color":"#0c2b50","color_rotate":"330"}\'></div>\n				<div class="color_list" data-color=\'{"start_color":"#29c0db","end_color":"#1178c2","color_rotate":"300"}\'></div>\n			</div>\n		</div>\n\n		<!-- 提交 -->\n		<div class="form_row">\n			<div class=\'setting_title\'></div>\n			<div class="setting_content">\n				<button class="theme_diy_save btn btn-primary">{{LNG.button_save}}</button>\n			</div>\n		</div>\n\n	</div>\n</div>\n'),define("app/src/setting/page/user.html",[],'<div class="nav">\n	<a href="javascript:;"  class="this" data-page="setting_basic">{{LNG.setting_basic}}</a>\n	<a href="javascript:;" class="" data-page="setting_menu">{{LNG.setting_password}}</a>\n	<div style="clear:both;"></div>\n</div>\n\n<div class="panel panel-default setting_basic system_setting user_config_setting">\n	<div class="panel-body">\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.recycle_open_if}}:</div>\n			<div class="setting_content">\n				<label class="disable-ripple">\n					<input type="checkbox" class="kui-checkbox-ios size-big" name="recycle_open"\n					 {{if data.user.recycle_open==\'1\'}}checked="checked"{{/if}}/><em></em>\n				</label>\n			</div>\n		</div>\n\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.setting_user_animate_open}}:</div>\n			<div class="setting_content">\n				<label class="disable-ripple">\n					<input type="checkbox" class="kui-checkbox-ios size-big" name="animate_open"\n					 {{if data.user.animate_open !=\'0\'}}checked="checked"{{/if}}/><em></em>\n				</label>\n			</div>\n		</div>\n\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.setting_user_sound_open}}:</div>\n			<div class="setting_content">\n				<label class="disable-ripple">\n					<input type="checkbox" class="kui-checkbox-ios size-big" name="sound_open"\n					 {{if data.user.sound_open ==\'1\'}}checked="checked"{{/if}}/><em></em>\n				</label>\n			</div>\n		</div>\n\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.upload_exist}}:</div>\n			<div class="setting_content">\n				<label><input type="radio" class="kui-radio" name="file_repeat" value="rename" {{if data.user.file_repeat==\'rename\'}}checked="checked"{{/if}}/>{{LNG.upload_exist_rename}}</label>\n				<label><input type="radio" class="kui-radio" name="file_repeat" value="replace" {{if data.user.file_repeat==\'replace\'}}checked="checked"{{/if}}/>{{LNG.upload_exist_replace}}</label>\n				<label><input type="radio" class="kui-radio" name="file_repeat" value="skip" {{if data.user.file_repeat==\'skip\'}}checked="checked"{{/if}}/>{{LNG.upload_exist_skip}}</label>\n				<div style="clear:both"></div>\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<div class="panel panel-default setting_menu hidden">\n	<div class="panel-body">\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.setting_password_old}}:</div>\n			<div class="setting_content"><input type="password" id="password_now"value="" /></div>\n		</div>\n\n		<div class="form_row">\n			<div class=\'setting_title\'>{{LNG.setting_password_new}}:</div>\n			<div class="setting_content"><input type="password" id="password_new" value=""/></div>\n		</div>\n\n		<!-- 提交 -->\n		<div class="form_row">\n			<div class=\'setting_title\'></div>\n			<div class="setting_content">\n				<button onclick="Setting.tools();" class="btn btn-primary save">{{LNG.button_save}}</button>\n			</div>\n		</div>\n	</div>\n</div>\n'),define("app/src/setting/page/wall.html",[],'<div class="section">\n	<div class=\'box\' data-type="wall">\n	{{each data.setting_all.wallall.split(\',\') as value key}}\n	<div class=\'{{if value==data.user.wall}}this{{/if}} list\' data-value=\'{{value}}\'>\n		<div class=\'ico\'><img src=\'{{G.static_path}}images/wall_page/thumb/{{value}}.jpg\'/></div>\n	</div>\n	{{/each}}\n	<div style="clear:both;"></div>\n	</div>\n</div>\n\n\n<div class="panel panel-default">\n	<div class="panel-heading"><h3 class="panel-title">{{LNG.setting_wall_diy}}</h3></div>\n	<div class="panel-body">\n		<div class="form_row theme_bg_image">\n			<div class=\'setting_title\'>URL:</div>\n			<div class="setting_content file_select_input">\n				<input type="text" id="wall_url" {{if data.user.wall.length>3}}value="{{data.user.wall}}"{{/if}}/> \n				<button class="path_select btn btn-default btn-right"><i class="font-icon icon-folder-open"></i></button>\n				<img class="randomImage" src="{{G.static_path+\'images/common/desktop/fengche.png\'}}" title="{{LNG.setting_wall}}"/>\n			</div>\n		</div>\n\n		<!-- 提交 -->\n		<div class="form_row">\n			<div class=\'setting_title\'></div>\n			<div class="setting_content">\n				<button onclick="Setting.tools();" class="btn btn-primary">{{LNG.button_save}}</button>\n			</div>\n		</div>\n	</div>\n</div>\n'),define("app/src/setting/system/system_setting",[],function(){var e=function(){$("input[name='first_in']").live("click",function(){$("input[name='first_in']").removeAttr("checked"),$(this).attr("checked","checked")
}),$(".system_save").die("click").live("click",function(){var e={};$(".system_setting .form_row input").each(function(){var t=$(this);if("checkbox"==t.attr("type")){var i=void 0==t.attr("checked")?"0":"1";e[t.attr("name")]=i}else"radius"!=t.attr("type")&&(e[t.attr("name")]=urlEncode(t.val()))}),e.first_in=$("input[name='first_in'][checked]").val(),i(e)}),t(),$(".phpinfo").die("click").live("click",function(){$.dialog.open("./index.php?setting/php_info",{title:"php_info",width:"70%",height:"65%",resize:!0})}),$(".system_setting_more").die("click").live("click",function(){if(G.is_root){var e=G.basic_path+"config/setting_user.php",t=ShareData.frameTop();if(t.Editor!==void 0)return t.Editor.add(urlEncode(e)),void 0;if(ShareData.frameTop("OpenopenEditor")){var i=t.$.dialog.list.openEditor,a=0;i&&("hidden"==$("."+i.config.id).css("visibility")&&(a=200),i.display(!0).zIndex().focus()),setTimeout(function(){ShareData.frameTop("OpenopenEditor",function(t){t.Editor.add(urlEncode(e))})},a)}else{var n="./index.php?editor/edit#filename="+urlEncode(e);core.openDialog(n,core.icon("edit"),htmlEncode(e),"openEditor")}}})},t=function(){$('.setting_menu .menu_list input[name="target"]').live("click",function(){"_blank"==$(this).val()?($(this).val("_self"),$(this).removeAttr("checked")):($(this).val("_blank"),$(this).attr("checked","checked"))}),$(".setting_menu .system_menu_add").live("click",function(){var e=$(".menu_default").clone().removeClass("menu_default hidden").addClass("menu_list");e.insertAfter(".setting_menu .menu_list:last")}),$(".setting_menu .menu_list .move_up").live("click",function(){var e=$(this).parent().parent();e.prev().hasClass("menu_list")&&e.insertBefore(e.prev())}),$(".setting_menu .menu_list .move_down").live("click",function(){var e=$(this).parent().parent();e.next().hasClass("menu_list")&&e.insertAfter(e.next())}),$(".setting_menu .menu_list .move_hidden").live("click",function(){var e=$(this).parent().parent();e.hasClass("menu_hidden")?(e.removeClass("menu_hidden"),$(this).text(LNG.menu_hidden)):(e.addClass("menu_hidden"),$(this).text(LNG.menu_show))}),$(".setting_menu .menu_list .move_del").live("click",function(){var e=$(this).parent().parent();e.remove()}),$(".system_menu_save").live("click",function(){var e=[];$(".setting_menu .menu_list").each(function(){var t=$(this),i={};t.hasClass("menu_default")||(t.find("input").each(function(){i[$(this).attr("name")]=urlEncode($(this).attr("value"))}),""!=i.name&&(i.use="1",i.type="",t.hasClass("menu_hidden")&&(i.use="0"),t.hasClass("menu_system")&&(i.type="system"),e.push(i)))}),i({menu:e})})},i=function(e){$.ajax({url:"index.php?setting/system_setting",type:"POST",data:"data="+urlEncode(jsonEncode(e)),dataType:"json",success:function(e){Tips.tips(e)}})};e()}),define("app/src/setting/system/system",["lib/contextMenu/jquery-contextMenu","lib/ztree/ztree","./system_member","./system_group","./system_role"],function(e){e("lib/contextMenu/jquery-contextMenu"),e("lib/ztree/ztree");var t=e("./system_member"),i=e("./system_group"),a=e("./system_role"),n=function(){o("system_group"),s(),a.init(),i.init()},o=function(e){$(".system_conennt .this").removeClass("this"),$(".system_conennt #"+e).addClass("this"),$(".left_content").addClass("hidden"),$("."+e).removeClass("hidden"),$(".right_frame").addClass("hidden"),$("#content_"+e).removeClass("hidden")},s=function(){$(".left_header .tab").die("click").live("click",function(){var e=$(this).attr("id");o(e)})},r=function(e){e.each(function(){var e=core.userSpaceHtml($(this).html());$(this).html(e)})},l=function(e){var t=G.user_path+e.path+"/home/";e.group_id&&(t=G.group_path+e.path+"/home/"),e.home_path&&(t=e.home_path),window.parent&&window.parent.Config&&"explorer"==window.parent.Config.pageApp?(window.parent.ui.path.list(t),Tips.tips(LNG.system_open_true_path,!0)):core.explorer(t)};return{init:n,sizeUse:r,openPath:l,dataList:core.tools.systemData,systemMember:t,systemGroup:i,systemRole:a}}),define("app/src/setting/system/system_member",[],function(e){var t,i,a=function(e){return void 0!=t?(n(e),void 0):($.ajax({url:"./index.php?system_member/get",dataType:"json",success:function(i){return i.code?(t=System.dataList(i,"member"),n(e),void 0):(Tips.tips(i),void 0)},error:function(){return!1}}),void 0)},n=function(a){""==a&&(a=i),i=a;var n=e("./tpl/user_list.html"),o=template.compile(n),s=o({LNG:LNG,select_group:a,user_list:t,group_list:System.systemGroup.getList(),role_list:System.systemRole.getList()});$(".user_liser_content").html(s),$(".button_aciton_muti button").addClass("disabled"),System.sizeUse($("#content_system_group .user_list_cell .space"))},o=function(e,n,o){if(void 0!=n){"object"!=typeof n&&(n=[n]);var s={del:LNG.system_member_remove_tips,status_set:"",role_set:LNG.system_member_set_role,group_reset:"",group_remove_from:LNG.system_member_remove_group,group_add:""},r=function(){$.ajax({url:"./index.php?system_member/do_action&action="+e,type:"POST",data:"user_id="+jsonEncode(n)+"&param="+o,dataType:"json",beforeSend:function(){Tips.loading()},error:core.ajaxError,success:function(e){Tips.close(e),$.dialog.list.share_dialog&&$.dialog.list.share_dialog.close(),t=void 0,a(i)}})};""==s[e]?r():$.dialog({id:"dialog_user_confirm",fixed:!0,icon:"question",padding:30,width:250,lock:!0,background:"#000",opacity:.2,content:s[e],ok:function(){r()},cancel:!0})}},s="write",r=function(e){var t={1:s};t[e]=s;var i={user_id:"",name:"",password:"123456",role:"default",group_info:t,config:{size_max:"1.5",size_use:"0"}};console.log(i),p(i,!0)},l=function(e){var t={1:s};t[e]=s;var i={user_id:"",name:"",password:"123456",role:"default",group_info:t,config:{size_max:"1.5",size_use:"0"}};p(i)},c=function(){var e=1073741824*parseFloat($(".size_max_set input").val()),t=core.fileSize(e);0==e||isNaN(e)?$(".size_max_set i").html(LNG.space_tips_default):$(".size_max_set i").html(t)},d=function(){var e=System.systemGroup.getList(),t=jsonDecode($("#group_info").attr("value")),i="";for(var a in t)e[a]&&(i+="read"==t[a]?'<span class="label label-info" title="'+LNG.system_role_read+'">'+e[a].name+"</span>":'<span class="label label-primary" title="'+LNG.system_role_write+'">'+e[a].name+"</span>");$(".dlg_group_display .cell").html(i+'<div style="clear:both"></div>')},p=function(n,s){var r=System.systemRole.getList(),l=e("./tpl/user.html");s&&(l=e("./tpl/user_import.html"));var p=template.compile(l),f=p({LNG:LNG,user_info:n,role_list:r}),h=$.dialog({id:"share_dialog",simple:!0,resize:!1,width:425,background:"#000",opacity:.1,title:"",padding:"0",fixed:!0,lock:!0,content:f});c(),System.sizeUse($(".share_view_info")),$("#group_info").val(jsonEncode(n.group_info)),$(".dlg_group_select").unbind("click").bind("click",function(){u($("#group_info").val(),function(e){$("#group_info").val(e),d()})}),d(),$(".input_line #name").textFocus();var m="./index.php?system_member/add";s?m="./index.php?system_member/add&isImport=1":""==n.name?$(".share_action .remove_button").hide():m="./index.php?system_member/edit&user_id="+n.user_id,$("#system_save").unbind("click").bind("click",function(){_()}),$(".select_drop_menu a").unbind("click").bind("click",function(){$(this).parent().parent().find("a").removeClass("selected"),$(this).addClass("selected"),$(".select_drop_menu .role_title").html($(this).html()),$("#role").val($(this).attr("data-role-id"))}),$(".remove_button").unbind("click").bind("click",function(){o("del",n.user_id,"")}),$(".dlg_goto_path").unbind("click").bind("click",function(){System.openPath(n)}),$(".content_box input").keyEnter(function(){_(!0)}),$("#system_save_goon_add").unbind("click").bind("click",function(){_(!0)}),$(".user_setting_more_btn").unbind("click").bind("click",function(){$(".user_setting_more").toggleClass("hidden")}),$(".select_path a.select_btn").unbind("click").bind("click",function(){var e=this;core.api.pathSelect({type:"folder",title:LNG.path_api_select_folder,firstPath:$(".select_path input").val()},function(t){$(e).parent().find("input").val(t)})}),$(".select_path a.reset").unbind("click").bind("click",function(){$(this).parent().find("input").val("")});var _=function(e){s&&(e=!1);var o={};$(".share_dialog .content_info [name]").each(function(){var e=urlEncode($(this).val());""!=e&&(o[$(this).attr("name")]=e)}),$.ajax({url:m,data:o,type:"POST",dataType:"json",beforeSend:function(){Tips.loading()},error:core.ajaxError,success:function(o){return Tips.close(o),o.code||"version_error"!=o.info?o.code?(t=void 0,a(i),s?h.close():""!=n.name||1!=e?h.close():$(".input_line #name").val("").textFocus(),void 0):(s&&$("#name").val(o.info),void 0):($.dialog({content:o.data,padding:"30px 25px",width:"300px",okVal:LNG.learn_more,ok:function(){window.open(core.versionUpdateVip)}}),void 0)}})}},u=function(t,i){var a=System.systemGroup.getListTree(),n=System.systemGroup.getList();t=jsonDecode(t),$.isArray(t)&&(t={});var o={view:{showLine:!1,selectedMulti:!1,dblClickExpand:!1,addDiyDom:function(e,t){var i=12,a=$("#"+e+" #"+t.tId+"_switch"),n=$("#"+e+" #"+t.tId+"_ico");if(n.before(a).after('<i class="font-icon group_select_box icon-sort"></>').before('<span class="tree_icon button">'+core.iconSmall("groupGuest")+"</span>").removeClass("ico_docu").addClass("group_icon").remove(),t.level>=1){var o="<span class='space' style='display:inline-block;width:"+i*t.level+"px'></span>";a.before(o)}$("#"+e+" #"+t.tId+"_a").attr("data_group_id",t.id)}},callback:{onClick:function(e,i,a){t||(t={}),$("#"+a.tId+"_a").hasClass("this")?delete t[a.id]:t[a.id]=s,c()}}},r=function(){var e=$("#user_group_select");$.fn.zTree.init(e,o,a);var t=$.fn.zTree.getZTreeObj("user_group_select");t&&t.expandAll(!0)},l=function(){var a=e("./tpl/group_select.html"),n=template.compile(a),o=n({LNG:LNG});$.dialog({id:"select_usre_group_dlg",title:LNG.system_member_group_edit,padding:"0",width:540,lock:!0,background:"#fff",opacity:.1,fixed:!0,content:o,ok:function(){i(jsonEncode(t))},cancel:!0}),r()},c=function(){var e="";$("#user_group_select .curSelectedNode").removeClass("curSelectedNode"),$("#user_group_select a[data_group_id]").removeClass("this");var i=function(e){var t={read:LNG.system_role_read,write:LNG.system_role_write},i="",a='class="selected"',n="btn-primary";"read"==e&&(i='class="selected"',a="",n="btn-default");var o='<div class="btn-group select_drop_menu open">				  <button class="btn '+n+' btn-xs" type="button" data-toggle="dropdown">					<span class="group_info_title pr-5">'+t[e]+'</span><span class="caret"></span>				  </button>				  <ul class="dropdown-menu" data-current="'+e+'">					<li data-info="read" '+i+">"+LNG.system_role_read+'</li>					<li data-info="write" '+a+">"+LNG.system_role_write+"</li>				  </ul>				</div>";return o};for(var a in t)n[a]&&($("#user_group_select a[data_group_id="+a+"]").addClass("this"),e+='<li class="group_self" group-id="'+a+'">'+'    <span class="title"><i class="font-icon icon-group"></i>'+n[a].name+"</span>"+'    <i class="font-icon icon-remove remove"></i>'+i(t[a])+"</li>");$(".select_group_right").html(e)},d=function(){$(".right_content .group_self .remove").die("click").live("click",function(){var e=$(this).parent().attr("group-id");delete t[e],c()}),$(".group_self .dropdown-menu li").die("click").live("click",function(){var e=$(this).attr("data-info"),i=$(this).parent().attr("data-current"),a=$(this).parent().parent().parent().attr("group-id");i!=e&&(t[a]=e,c())})};l(),c(),d()},f=function(){$(".context-menu-list").filter(":visible").trigger("contextmenu:hide")},h=function(){$("body").click(f).contextmenu(f),$.contextMenu({zIndex:9999,selector:".user_action_menu",items:{user_list_edit:{name:LNG.edit,icon:"edit",accesskey:"e"},sep1:"--------",user_remove:{name:LNG.remove,icon:"trash",accesskey:"d"},user_status_close:{name:LNG.system_member_unuse,icon:"",accesskey:"c"},user_status_open:{name:LNG.system_member_use,icon:"",accesskey:"o"},sep2:"--------",group_remove_from:{name:LNG.system_member_group_remove,icon:"",accesskey:"g"},group_add:{name:LNG.system_member_group_insert,icon:"",accesskey:"a"},group_reset:{name:LNG.system_member_group_reset,icon:"",accesskey:"i"}},callback:function(e,t){var i=t.$trigger.attr("data-id");$("#content_system_group .group_id").html();var a=[i];_(e,a,"")}})},m=function(){$(".size_max_set input").live("input",c),$("#content_system_group .content [data-action]").live("click",function(e){if(!$(e.target).is("input")){var t=$(this),i=t.attr("data-action"),a=[];if($("#content_system_group .user_select:checked").each(function(){a.push($(this).parent().parent().attr("data-id"))}),"user_list_edit"==i){var n=t.parent().parent().attr("data-id");a=[n]}return _(i,a,t,e),!0}})},_=function(e,i,a,n){var s=$("#content_system_group .group_id").html();switch(e){case"user_add":l(s);break;case"user_import":r(s);break;case"group_remove_from":o("group_remove_from",i,s);break;case"group_add":u("{}",function(e){o("group_add",i,e)});break;case"group_reset":u("{}",function(e){o("group_reset",i,e)});break;case"role_set":var c=a.attr("data-role-id");o("role_set",i,c);break;case"user_status_open":o("status_set",i,1);break;case"user_status_close":o("status_set",i,0);break;case"user_remove":o("del",i,"");break;case"user_list_select":var d=a.find(".user_select");d.attr("checked")?d.removeAttr("checked"):d.attr("checked","true"),v();break;case"user_list_edit":p(t[i[0]]),stopPP(n);break;default:}},v=function(){$("#content_system_group .user_select:checked").length>=1?$(".button_aciton_muti button").removeClass("disabled"):$(".button_aciton_muti button").addClass("disabled"),$("#content_system_group .user_list_cell ").removeClass("selected"),$("#content_system_group .user_select:checked").each(function(){$(this).parent().parent().addClass("selected")})},g=function(){$("#content_system_group .user_select_set").live("click",function(){$(this).attr("checked")?$("#content_system_group .user_select").attr("checked","true"):$("#content_system_group .user_select").removeAttr("checked"),v()}),$("#content_system_group .user_select").live("click",function(){v()})};return g(),m(),h(),{resetList:function(){t=void 0},loadList:a,add:l}}),define("app/src/setting/system/tpl/user_list.html",[],'<div class="user_tool_bar">\n	<div class="btn-group btn-group-sm ml-10">\n		<button type="button" class="btn btn-default" data-action="user_add">{{LNG.system_member_add}}</button>\n		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n			<span class="caret"></span>&nbsp;\n			<span class="sr-only">Dropdown</span>\n		</button>\n		<ul class="dropdown-menu">\n			<li><a href="javascript:void(0);" data-action="user_import">{{LNG.system_member_import}}</a></li>\n		</ul>\n	</div>\n	<div class="btn-group btn-group-sm ml-10 button_aciton_muti">\n		<button class="btn btn-default" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n			<span class="role_title pr-5">{{LNG.system_member_group_config}}</span><span class="caret"></span>\n		</button>\n		<ul class="dropdown-menu">\n			<li><a href="javascript:void(0);" data-action="group_remove_from">{{LNG.system_member_group_remove}}</a></li>\n			<li><a href="javascript:void(0);" data-action="group_add">{{LNG.system_member_group_insert}}</a></li>\n			<li class="divider disabled"></li>\n			<li><a href="javascript:void(0);" data-action="group_reset">{{LNG.system_member_group_reset}}</a></li>\n		</ul>\n	</div>\n	<div class="btn-group btn-group-sm ml-5 button_aciton_muti">\n		<button class="btn btn-default" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n			<span class="role_title pr-5">{{LNG.system_member_role}}</span><span class="caret"></span>\n		</button>\n		<ul class="dropdown-menu">\n			{{each role_list as value key}}\n			<li><a href="javascript:void(0);" data-action="role_set" data-role-id="{{key}}">{{value}}</a></li>\n			{{/each}}\n		</ul>\n	</div>\n\n	<div class="btn-group btn-group-sm button_aciton_muti ml-10">\n		<button class="btn btn-default" data-action="user_status_close">{{LNG.system_member_unuse}}</button>\n		<button class="btn btn-default" data-action="user_status_open">{{LNG.system_member_use}}</button>\n		<button class="btn btn-default" data-action="user_remove">{{LNG.remove}}</button>\n	</div>\n</div>\n<div class="user_list">\n	<table id="list" align="center" border="0" cellspacing="0" cellpadding="0">\n		<tbody>\n			<tr class="title">\n				<td class="select"><input type=\'checkbox\' class="user_select_set kui-checkbox size-small"/></td>\n				<td class="name">{{LNG.username}}</td>\n				<td class="role">{{LNG.system_member_role}}</td>\n				<td class="space">{{LNG.space_size_use}}</td>\n				<td class="group">{{LNG.system_member_group}}</td>\n			</tr>\n			{{each user_list as v i}}\n				{{if v && (select_group==\'1\' || v.group_info[select_group]) }}\n				<tr data-id="{{v.user_id}}" data-action="user_list_select" class="user_action_menu user_list_cell {{if v.status=="0"}}unuse{{/if}}">\n					<td class="select">\n						{{if v.user_id!=\'1\'}}<input type=\'checkbox\' class="user_select kui-checkbox size-small"/>{{/if}}\n					</td>\n					<td class="name">\n						<a data-action="user_list_edit" href="javascript:void(0);">{{v.name}}</a>\n						<span class="label-small" {{if v.home_path}}style="background:#84d9ff;"{{/if}}>{{v.user_id}}</span>\n					</td>\n					<td class="role">{{role_list[v.role]}}</td>\n					<td class="space">{{v.config.size_use}}/{{v.config.size_max}}</td>\n					<td class="group">\n						{{each v.group_info as group_read group_id}}\n							{{if group_list[group_id]}}\n								{{if group_read=="read"}}\n								<span class="label label-info" title="{{LNG.system_role_read}}">{{group_list[group_id][\'name\']}}</span>\n								{{else}}\n								<span class="label label-primary" title="{{LNG.system_role_write}}">{{group_list[group_id][\'name\']}}</span>\n								{{/if}}\n							{{else}}\n								<!-- <span class="label label-danger">{{group_id}}</span> -->\n							{{/if}}\n						{{/each}}\n					</td>\n				</tr>\n				{{/if}}\n			{{/each}}\n		</tbody>\n	</table>\n</div><!-- 用户列表 -->\n\n\n'),define("app/src/setting/system/tpl/user.html",[],'<div class=\'content_box\'>\n	<div class=\'title\'>\n		<div class="titleinfo">\n			{{if !user_info.name}}\n			<i class="font-icon icon-group"></i>{{LNG.system_member_add}}\n			{{else}}\n			<i class="font-icon icon-pencil"></i>{{user_info.name}}	        \n			{{/if}}\n		</div>    \n		{{if user_info.name}}\n		<div class="share_view_info">{{user_info.config.size_use}}/{{user_info.config.size_max}}</div>\n		{{/if}}    \n	</div>\n	<div class=\'content_info\'>\n		<div class="input_line">\n			<span class="input_title">{{LNG.username}}:</span>\n			<input id="name" type="text" name="name" value="{{user_info.name}}" />\n			{{if user_info.name}}\n			<a href="javascript:void(0);" class="font-icon-label dlg_goto_path"><i class="font-icon icon-folder-open"></i></a>\n			{{else}}\n			<i class="desc">{{LNG.username}}</i>\n			{{/if}}\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line">\n			<span class="input_title">{{LNG.password}}:</span>\n			<input id="password" type="text" name="password" \n			value="{{if !user_info.name}}{{user_info.password}}{{/if}}" \n			placeholder="{{if user_info.name}}{{LNG.system_member_password_tips}}{{/if}}"/>\n			{{if user_info.name}}<i class="desc">{{LNG.system_member_password_tips}}</i>{{/if}}\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line size_max_set">\n			<span class="input_title">{{LNG.space_size}}:</span>\n			<input id="size_max" type="text" name="size_max" value="{{user_info.config.size_max}}" />\n			<i class="desc label label-default" style="color:#698ebf;background:#E9F3F9;"></i>\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line">\n			<span class="input_title">{{LNG.system_member_role}}:</span>\n			<input type="hidden" id="role" name="role" value="{{user_info.role}}"/>\n			<div class="btn-group select_drop_menu">\n			  <button class="btn btn-default btn-xs" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n				<span class="role_title pr-5">\n				{{if role_list[user_info.role]}}\n				{{role_list[user_info.role]}}\n				{{else}}\n				<i>{{LNG.system_member_role_select}}</i>\n				{{/if}}\n				</span><span class="caret"></span>\n			  </button>\n			  <ul class="dropdown-menu">\n				{{each role_list as value key}}\n					{{if key==user_info.role}}\n					<li><a href="javascript:void(0);" class="selected" data-role-id="{{key}}">{{value}}</a></li>\n					{{else}}\n					<li><a href="javascript:void(0);" data-role-id="{{key}}">{{value}}</a></li>\n					{{/if}}\n				{{/each}}\n			  </ul>\n			</div>\n\n			<!-- <input type="text" id="role" name="role" value="{{user_info.role}}" /> -->\n			<a href="javascript:void(0);" class="btn btn-sm user_setting_more_btn">{{LNG.more}}</a>\n			<div style="clear:both"></div>\n		</div>\n\n		<div class="user_setting_more {{if !user_info.home_path}}hidden{{/if}}">\n			<div class="input_line select_path">\n				<span class="input_title">{{LNG.system_set_home_path}}:</span>\n				<input id="home_path" type="text" name="home_path" value="{{user_info.home_path}}" placeholder="{{LNG.system_set_home_path_tips}}"/>\n				<a href="javascript:void(0);" class="btn btn-sm btn-default select_btn">\n					<i class="font-icon icon-folder-open"></i>\n				</a>\n				<a href="javascript:void(0);" class="btn btn-sm btn-link reset">\n					<i class="font-icon icon-remove"></i>\n				</a>\n				<div style="clear:both"></div>\n			</div>\n		</div>\n\n		<div class="input_line">\n			<span class="input_title">{{LNG.system_member_group}}:</span>\n			<input id="group_info" type="hidden" name="group_info" value="{{user_info.group_info}}" />\n			<div class="dlg_group_display">\n				<div class="cell"></div>\n				<button class="btn btn-default btn-sm dlg_group_select" type="button">\n					<i class="font-icon icon-pencil"></i><span class="group_title pl-10">{{LNG.system_member_group_edit}}</span>\n				</button>\n			</div>\n			<div style="clear:both"></div>\n		</div>\n	</div>\n\n	<div class="share_action">\n		{{if !user_info.name}}\n		<button type="button" class="btn btn-primary" id="system_save">{{LNG.button_add}}</button>\n		<button type="button" class="btn btn-primary" id="system_save_goon_add">{{LNG.button_save_and_add}}</button>\n		{{else}}\n		<button type="button" class="btn btn-primary" id="system_save">{{LNG.button_save}}</button>\n		<a type="button" href="javascript:void(0);" class="remove_button">{{LNG.button_del}}</a>\n		{{/if}}\n	</div>\n</div>\n'),define("app/src/setting/system/tpl/user_import.html",[],'<div class=\'content_box\'>\n	<div class=\'title\'>\n		<div class="titleinfo">\n			<i class="font-icon icon-group"></i>{{LNG.system_member_import}}\n		</div>\n	</div>\n	<div class=\'content_info\'>\n		<div class="input_line">\n			<span class="input_title">{{LNG.username}}:</span>\n			<textarea id="name" type="text" name="name" value="{{user_info.name}}"></textarea>\n			<i class="desc" style="position: absolute;line-height:1.5em;">{{#LNG.system_member_import_desc}}</i>\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line">\n			<span class="input_title">{{LNG.password}}:</span>\n			<input id="password" type="text" name="password" value="{{user_info.password}}"/>\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line size_max_set">\n			<span class="input_title">{{LNG.space_size}}:</span>\n			<input id="size_max" type="text" name="size_max" value="{{user_info.config.size_max}}" />\n			<i class="desc label label-default" style="color:#698ebf;background:#E9F3F9;"></i>\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line">\n			<span class="input_title">{{LNG.system_member_role}}:</span>\n			<input type="hidden" id="role" name="role" value="{{user_info.role}}"/>\n			<div class="btn-group select_drop_menu">\n			  <button class="btn btn-default btn-xs" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n				<span class="role_title pr-5">\n				{{if role_list[user_info.role]}}\n				{{role_list[user_info.role]}}\n				{{else}}\n				<i>{{LNG.system_member_role_select}}</i>\n				{{/if}}\n				</span><span class="caret"></span>\n			  </button>\n			  <ul class="dropdown-menu">\n				{{each role_list as value key}}\n					{{if key==user_info.role}}\n					<li><a href="javascript:void(0);" class="selected" data-role-id="{{key}}">{{value}}</a></li>\n					{{else}}\n					<li><a href="javascript:void(0);" data-role-id="{{key}}">{{value}}</a></li>\n					{{/if}}\n				{{/each}}\n			  </ul>\n			</div>\n\n			<!-- <input type="text" id="role" name="role" value="{{user_info.role}}" /> -->\n			<i class="desc">{{LNG.system_member_role}}</i>\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line">\n			<span class="input_title">{{LNG.system_member_group}}:</span>\n			<input id="group_info" type="hidden" name="group_info" value="{{user_info.group_info}}" />\n\n			<div class="dlg_group_display">\n				<div class="cell"></div>\n				<button class="btn btn-default btn-sm dlg_group_select" type="button">\n					<i class="font-icon icon-pencil"></i><span class="group_title pl-10">{{LNG.system_member_group_edit}}</span>\n				</button>\n			</div>\n			<div style="clear:both"></div>\n		</div>\n	</div>\n\n	<div class="share_action">\n		<button type="button" class="btn btn-primary" id="system_save">{{LNG.button_add}}</button>\n	</div>\n</div>\n'),define("app/src/setting/system/tpl/group_select.html",[],'<div class=\'content_box select_user_group\'>\n	<div class=\'content_info\'>\n		<div class="title_info">\n			<span class="title">{{LNG.system_group_select}}:</span>\n			<span class="title title_right">{{LNG.system_group_select_result}}:</span>\n		</div>\n		<div class="left_content ztree" id=\'user_group_select\'></div>\n		<div class="center_action"><i class="font-icon icon-arrow-right"></i></div>\n		<div class="right_content">\n			<ul class="select_group_right">\n			</ul>\n		</div>\n		<div style="clear:both"></div>\n	</div>\n</div>\n'),define("app/src/setting/system/system_group",[],function(e){var t,i,a,n,o=function(){p(),c(),$(".ztree .switch").die("mouseenter").live("mouseenter",function(){$(this).addClass("switch_hover")}).die("mouseleave").live("mouseleave",function(){$(this).removeClass("switch_hover")}),$(".menuGroup").die("mouseenter").live("mouseenter",function(){$(this).addClass("hover")}).die("mouseleave").live("mouseleave",function(){$(this).removeClass("hover")}),G.is_root||$("[data-action=group_home").addClass("hidden")},s={view:{showLine:!1,selectedMulti:!1,dblClickExpand:!0,addDiyDom:function(e,t){var i=12,a=$("#"+e+" #"+t.tId+"_switch"),n=$("#"+e+" #"+t.tId+"_ico");if(n.before(a).before('<span class="tree_icon button">'+core.iconSmall("groupGuest")+"</span>").remove(),t.level>=1){var o="<span class='space' style='display: inline-block;width:"+i*t.level+"px'></span>";a.before(o)}$("#"+e+" #"+t.tId+"_a").addClass("menuGroup").append("<i class='sub_menu icon-reorder'><i>").attr("data_group_id",t.id)}},callback:{onClick:function(e,t,i){r(t,i.id)},beforeRightClick:function(e,t){r(e,t.id)}}},r=function(e,i){if("folderList"==e){n=i;var a=t.getNodeByParam("id",i,null);t.selectNode(a),g(i)}else"group_parent_select"==e&&($("#group_parent").val(i),$(".select_group").addClass("hidden"),m())},l=function(e){var t=function(e){for(var i=0;e.length>i;i++)void 0!=e[i]?(e[i].pid=e[i].parent_id,e[i].id=e[i].group_id,delete e[i].children,delete e[i].parent_id,delete e[i].group_id,e[i].child&&(e[i].children=e[i].child,delete e[i].child,t(e[i].children))):delete e[i]},i=[],a=$.extend(!0,{},e);for(var n in a){var o=a[n];if(a[o.parent_id])a[o.parent_id].child||(a[o.parent_id].child=[]),a[o.parent_id].child.push(a[o.group_id]);else{var s=a[o.group_id];s&&i.push(s)}}return t(i),i},c=function(){$.ajax({url:"./index.php?&system_group/get",dataType:"json",error:function(){$("#folderList").html('<div style="text-align:center;">'+LNG.system_error+"</div>")},success:function(e){return e.code?(a=System.dataList(e,"group"),i=l(a),$.fn.zTree.init($("#folderList"),s,i),t=$.fn.zTree.getZTreeObj("folderList"),t.expandAll(!0),void 0==n&&(n="1"),r("folderList",n),0!=$("#group_parent_select").length&&_(),void 0):($("#folderList").html('<div style="text-align:center;">'+LNG.system_error+"</div>"),void 0)}})},d=function(){$(".context-menu-list").filter(":visible").trigger("contextmenu:hide")},p=function(){$("body").click(d).contextmenu(d),$.contextMenu({zIndex:9999,selector:".menuGroup",items:{add_child:{name:LNG.system_group_add,icon:"plus",accesskey:"u"},edit:{name:LNG.edit,icon:"edit",accesskey:"e"},sep1:"--------",add_user:{name:LNG.system_member_add,icon:"user",accesskey:"g"},sep2:"--------",remove:{name:LNG.remove,icon:"remove-sign",accesskey:"r"}},callback:function(e,i){var a=i.$trigger.attr("id");a=a.replace("_a","");var n=t.getNodeByTId(a);switch(e){case"add_child":var o=u();o.parent_id=n.id,v(o);break;case"edit":var o=u(n.id);v(o);break;case"add_user":System.systemMember.add(n.id);break;case"remove":f(n.id);break;default:}}}),$(".sub_menu").die("click").live("click",function(e){$(this).contextMenu({x:e.pageX,y:e.pageY})})},u=function(e){return void 0==e?{group_id:"",name:"",parent_id:"",children:"",config:{size_max:"0",size_use:""},path:"",create_time:""}:a[e]},f=function(e,i){var a=t.getSelectedNodes()[0],n=a.getParentNode(),o="./index.php?system_group/del&group_id="+e;$.dialog({id:"dialog_path_remove",fixed:!0,icon:"question",title:LNG.system_group_remove,padding:30,width:300,lock:!0,background:"#000",opacity:.3,content:LNG.system_group_remove_tips,ok:function(){$.ajax({url:o,type:"POST",dataType:"json",beforeSend:function(){Tips.loading()},error:core.ajaxError,success:function(t){Tips.close(t),System.systemMember.resetList(),r("folderList",n.id),c(),"function"==typeof i&&i(e)}})},cancel:!0})},h=function(){var e=1073741824*parseFloat($(".size_max_set input").val()),t=core.fileSize(e);0==e||isNaN(e)?$(".size_max_set i").html(LNG.space_tips_default):$(".size_max_set i").html(t)},m=function(){var e=$("#group_parent_select"),t=$("#group_parent").val();if(e.find("a.menuGroup").removeClass("curSelectedNode"),""==t)return $(".select_parent_content .group_title").html("is root"),!1;var i=u(t);return $(".select_parent_content .group_title").html(i.name),e.find("a[data_group_id="+t+"]").addClass("curSelectedNode"),!0},_=function(){var e=$("#group_parent_select");$.fn.zTree.init(e,s,i);var t=$.fn.zTree.getZTreeObj("group_parent_select");t&&t.expandAll(!0),m()&&$(".select_parent_content .btn").unbind("click").bind("click",function(){$(".select_group").toggleClass("hidden")})},v=function(t){var i=e("./tpl/group.html"),a=template.compile(i),n=a({LNG:LNG,groupInfo:t}),o=$.dialog({id:"share_dialog",simple:!0,resize:!1,width:425,background:"#000",opacity:.1,title:"",padding:"0",fixed:!0,lock:!0,content:n});h(),System.sizeUse($(".share_view_info")),_(),$(".input_line #name").textFocus();var s="./index.php?system_group/add";if(""!=t.name)var s="./index.php?system_group/edit&group_id="+t.group_id;$("#system_save").unbind("click").bind("click",function(){r()}),$(".dlg_goto_path").unbind("click").bind("click",function(){System.openPath(t)}),$(".remove_button").unbind("click").bind("click",function(){f(t.group_id,function(){o.close()})}),$(".content_box input").keyEnter(function(){r(!0)}),$("#system_save_goon_add").unbind("click").bind("click",function(){r(!0)}),$(".user_setting_more_btn").unbind("click").bind("click",function(){$(".user_setting_more").toggleClass("hidden")}),$(".select_path a.select_btn").unbind("click").bind("click",function(){var e=this;core.api.pathSelect({type:"folder",title:LNG.path_api_select_folder,firstPath:$(".select_path input").val()},function(t){$(e).parent().find("input").val(t)})}),$(".select_path a.reset").unbind("click").bind("click",function(){$(this).parent().find("input").val("")});var r=function(e){var i="";$(".share_dialog .content_info input[name]").each(function(){var e=urlEncode($(this).val());
""!=e&&(i+="&"+$(this).attr("name")+"="+e)}),$.ajax({url:s,data:i,type:"POST",dataType:"json",beforeSend:function(){Tips.loading()},error:core.ajaxError,success:function(i){return Tips.close(i),i.code||"version_error"!=i.info?(i.code&&(c(),""!=t.name||1!=e?o.close():setTimeout(function(){$(".input_line #name").val("").textFocus()},200)),void 0):($.dialog({content:i.data,padding:"30px 25px",width:"300px",okVal:LNG.learn_more,ok:function(){window.open(core.versionUpdateVip)}}),void 0)}})}},g=function(e){var t=u(e);t&&($(".group_title .group_title_span").html(t.name),$(".group_size").html(t.config.size_use+"/"+t.config.size_max),$("#content_system_group .group_id").html(e),System.sizeUse($(".group_size")),System.systemMember.loadList(e))},b=function(){$(".size_max_set input").live("input",h),$("#content_system_group .header_content [data-action]").live("click",function(){var e=$(this).attr("data-action"),t=$("#content_system_group .group_id").html(),i=u(t);switch(e){case"group_edit":v(i);break;case"group_home":System.openPath(i);break;case"group_add_child":var a=u();a.parent_id=t,v(a);break;default:}})};return b(),{init:o,getGroupInfo:u,getListTree:function(){return i},getList:function(){return a}}}),define("app/src/setting/system/tpl/group.html",[],'<div class=\'content_box\'>\n	<div class=\'title\'>\n		<div class="titleinfo">\n			{{if !groupInfo.name}}\n			<i class="font-icon icon-plus"></i>{{LNG.system_group_create}}\n			{{else}}\n			<i class="font-icon icon-pencil"></i>{{groupInfo.name}}\n			{{/if}}\n		</div>\n		{{if groupInfo.name}}\n		<div class="share_view_info">{{groupInfo.config.size_use}}/{{groupInfo.config.size_max}}</div>\n		{{/if}}\n	</div>\n	<div class=\'content_info\'>\n		<div class="input_line">\n			<span class="input_title">{{LNG.system_group_name}}:</span>\n			<input id="name" type="text" name="name" value="{{groupInfo.name}}" />\n			{{if groupInfo.name}}\n			<a href="javascript:void(0);" class="font-icon-label dlg_goto_path"><i class="font-icon icon-folder-open"></i></a>\n			{{else}}\n			<i class="desc">{{LNG.name}}</i>\n			{{/if}}\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line size_max_set">\n			<span class="input_title">{{LNG.space_size}}:</span>\n			<input id="size_max" type="text" name="size_max" value="{{groupInfo.config.size_max}}" />\n			<i class="desc label label-default" style="color:#698ebf;background:#E9F3F9;"></i>\n			<div style="clear:both"></div>\n		</div>\n		<div class="input_line select_parent_content">\n			<span class="input_title">{{LNG.system_group_father}}:</span>\n			<input id="group_parent" type="hidden" name="parent_id" value="{{groupInfo.parent_id}}" />\n			<button class="btn btn-default btn-sm" type="button" style="padding: 5px 10px;">\n				<i class="font-icon icon-group"></i><span class="group_title pl-10"></span>\n			</button>\n			<ul class="select_group hidden ztree" id="group_parent_select"></ul>\n			<div style="clear:both"></div>\n		</div>\n\n		<div class="input_line" style="margin-bottom: -5px;">\n			<span class="input_title">&nbsp;</span>\n			<a href="javascript:void(0);" class="btn btn-sm user_setting_more_btn" style="padding-left:0;">{{LNG.more}}</a>\n			<div style="clear:both"></div>\n		</div>\n		<div class="user_setting_more {{if !groupInfo.home_path}}hidden{{/if}}">\n			<div class="input_line select_path">\n				<span class="input_title">{{LNG.system_set_home_path}}:</span>\n				<input id="home_path" type="text" name="home_path" value="{{groupInfo.home_path}}" placeholder="{{LNG.system_set_home_path_tips}}"/>\n				<a href="javascript:void(0);" class="btn btn-sm btn-default select_btn">\n					<i class="font-icon icon-folder-open"></i>\n				</a>\n				<a href="javascript:void(0);" class="btn btn-sm btn-link reset">\n					<i class="font-icon icon-remove"></i>\n				</a>\n				<div style="clear:both"></div>\n			</div>\n		</div>\n	</div>\n\n	<div class="share_action">		\n		{{if !groupInfo.name}}\n		<button type="button" class="btn btn-primary" id="system_save">{{LNG.button_add}}</button>\n		<button type="button" class="btn btn-primary" id="system_save_goon_add">{{LNG.button_save_and_add}}</button>\n		{{else}}\n		<button type="button" class="btn btn-primary" id="system_save">{{LNG.button_save}}</button>\n		<a type="button" href="javascript:void(0);" class="remove_button">{{LNG.button_del}}</a>\n		{{/if}}\n	</div>\n</div>\n\n'),define("app/src/setting/system/system_role",[],function(){var e,t,i=function(){$.ajax({url:"index.php?system_role/get",dataType:"json",async:!1,success:function(i){return i.code?(e=i.data,a(),void 0==t&&(t="1"),n(t),void 0):(Tips.tips(i),void 0)}})},a=function(){var t="";$.each(e,function(e,i){t+='<li class="role_cell" data-role-id="'+e+'">'+"<span>"+i.name+'</span><i class="sub_menu icon-angle-right"></i></li>'}),$(".role_list_cell").html(t)},n=function(i){var a;t=i,$(".system_role li.role_cell").removeClass("select"),$("#content_system_role [data-action=role_add],#content_system_role [data-action=role_delete]").show(),void 0==i?(a={name:"",ext_not_allow:"php|jsp|html"},$("#content_system_role [data-action=role_add],#content_system_role [data-action=role_delete]").hide(),$("#content_system_role .role_title").html(LNG.system_role_add)):(a=e[i],$(".system_role [data-role-id="+i+"]").addClass("select"),$("#content_system_role .role_title").html(a.name),$("#content_system_role .role_id").html(i)),$(".group_editor #name").val(a.name).textFocus(),$(".group_editor #ext_not_allow").val(a.ext_not_allow),$(".group_editor .tag").removeClass("this"),$(".group_editor input").removeAttr("checked"),$(".group_editor .tag").each(function(){var e=$(this),t=e.attr("data-role");t=t.split(";"),t=t[0],a[t]&&(e.addClass("this"),e.find("input").attr("checked",!0))})},o=function(){var e=$(".group_editor #name").val(),a=$(".group_editor #ext_not_allow").val(),n={},o="index.php?system_role/add";return void 0==a&&(a=""),""==e?(Tips.tips(LNG.not_null,"error"),!1):($(".group_editor .tag.this").each(function(){for(var e=$(this).attr("data-role").split(";"),t=0;e.length>t;t++)n[e[t]]=1}),"1"==t&&n!={}&&(n={},Tips.tips(LNG.system_role_admin_set,"warning")),void 0!=t&&(o="index.php?system_role/edit&role_id="+t),$.ajax({url:o+"&name="+urlEncode(e)+"&ext_not_allow="+a,data:n,type:"POST",dataType:"json",success:function(e){Tips.tips(e),e.code&&(t=e.info,i(),System.systemMember.loadList(""))}}),void 0)},s=function(e){$.dialog({fixed:!0,icon:"question",padding:"30px 40px",drag:!0,title:LNG.warning,content:LNG.if_remove+c(e)+"?<br/>"+LNG.group_remove_tips,cancel:!0,ok:function(){$.ajax({url:"index.php?system_role/del&role_id="+e,async:!1,dataType:"json",success:function(e){Tips.tips(e),e.code&&(t=void 0,i(),System.systemMember.resetList(),System.systemMember.loadList(""))}})}})},r=function(){$(".group_editor .tag").each(function(){$(this).hasClass("this")?($(this).removeClass("this"),$(this).find("input").removeAttr("checked")):($(this).addClass("this"),$(this).find("input").attr("checked",!0)),$(".group_editor .combox:eq(0) .tag:eq(0)").hasClass("this")||($(".group_editor .combox:eq(0) .tag").removeClass("this"),$(".group_editor .combox:eq(0) .tag").find("input").removeAttr("checked")),$(".group_editor .combox:eq(1) .tag:eq(0)").hasClass("this")||($(".group_editor .combox:eq(1) .tag").removeClass("this"),$(".group_editor .combox:eq(1) .tag").find("input").removeAttr("checked"))})},l=function(){$(".group_editor .tag").live("click",function(){var e=$(this);if(select=!1,e.toggleClass("this"),e.hasClass("this")?(select=!0,e.find("input").attr("checked",!0)):(select=!1,e.find("input").removeAttr("checked")),e.parent().hasClass("combox")){var t=e.index();1==t&&0==select&&(e.parent().find(".tag").removeClass("this"),e.parent().find("input").removeAttr("checked")),1!=t&&1==select&&(e.parent().find(".tag:eq(0)").addClass("this"),e.parent().find("input:eq(0)").attr("checked",!0))}}),$(".system_role li.role_cell").live("click",function(){n($(this).attr("data-role-id"))}),$("#content_system_role [data-action]").live("click",function(e){var i=$(this).attr("data-action");switch($(this),i){case"role_add":n();break;case"role_delete":s(t);break;case"role_edit_save":o();break;case"revert_all":r();break;default:}stopPP(e)})},c=function(t){var i=e[t];return i?i.name:'<span style="color:#f00">null</span>'},d=function(){var t={};return $.each(e,function(e,i){t[e]=i.name}),t};return l(),{init:i,getList:d,setSelect:n}});